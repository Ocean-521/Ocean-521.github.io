<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>【问题笔记】遇到的使用场景和解决方案</title>
      <link href="/2023/02/08/%E3%80%90%E9%97%AE%E9%A2%98%E7%AC%94%E8%AE%B0%E3%80%91%E9%81%87%E5%88%B0%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>/2023/02/08/%E3%80%90%E9%97%AE%E9%A2%98%E7%AC%94%E8%AE%B0%E3%80%91%E9%81%87%E5%88%B0%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<h3 id="map地图">map地图</h3><h4 id="1-计算两个gps坐标的距离">1、计算两个GPS坐标的距离</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Rad</span>(<span class="params">d</span>)&#123;</span><br><span class="line">   <span class="keyword">return</span> d * <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">180.0</span>;<span class="comment">//经纬度转换成三角函数中度分表形式。</span></span><br><span class="line">&#125;</span><br><span class="line">   <span class="comment">//计算距离，参数分别为第一点的纬度，经度；第二点的纬度，经度(lat为纬度, lng为经度)</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">GetDistance</span>(<span class="params">lat1,lng1,lat2,lng2</span>)&#123;</span><br><span class="line">   <span class="keyword">var</span> radLat1 = <span class="title class_">Rad</span>(lat1);</span><br><span class="line">   <span class="keyword">var</span> radLat2 = <span class="title class_">Rad</span>(lat2);</span><br><span class="line">   <span class="keyword">var</span> a = radLat1 - radLat2;</span><br><span class="line">   <span class="keyword">var</span>  b = <span class="title class_">Rad</span>(lng1) - <span class="title class_">Rad</span>(lng2);</span><br><span class="line">   <span class="keyword">var</span> s = <span class="number">2</span> * <span class="title class_">Math</span>.<span class="title function_">asin</span>(<span class="title class_">Math</span>.<span class="title function_">sqrt</span>(<span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="title class_">Math</span>.<span class="title function_">sin</span>(a/<span class="number">2</span>),<span class="number">2</span>) +</span><br><span class="line">       <span class="title class_">Math</span>.<span class="title function_">cos</span>(radLat1)*<span class="title class_">Math</span>.<span class="title function_">cos</span>(radLat2)*<span class="title class_">Math</span>.<span class="title function_">pow</span>(<span class="title class_">Math</span>.<span class="title function_">sin</span>(b/<span class="number">2</span>),<span class="number">2</span>)));</span><br><span class="line">   s = s *<span class="number">6378.137</span> ;<span class="comment">// EARTH_RADIUS;</span></span><br><span class="line">   s = <span class="title class_">Math</span>.<span class="title function_">round</span>(s * <span class="number">10000</span>) / <span class="number">10000</span>; <span class="comment">//输出为公里</span></span><br><span class="line">   <span class="comment">//s=s.toFixed(4);</span></span><br><span class="line">   <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="截取字符串">截取字符串</h3><h4 id="1-四舍五入小数点指定位数">1、四舍五入小数点指定位数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法：toFixed</span></span><br><span class="line"><span class="keyword">let</span> num =  <span class="keyword">new</span> <span class="title class_">Number</span>(<span class="number">12.38</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num.<span class="title function_">toFixed</span>(<span class="number">1</span>)) <span class="comment">// 输出 12.4</span></span><br></pre></td></tr></table></figure><h4 id="2-向下取整">2、向下取整</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法：Math.floor</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">0.60</span>)) <span class="comment">// 输出 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">0.30</span>)) <span class="comment">// 输出 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">5</span>)) <span class="comment">// 输出 5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">5.1</span>)) <span class="comment">// 输出 5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(-<span class="number">5.1</span>)) <span class="comment">// 输出 -6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(-<span class="number">5.9</span>)) <span class="comment">// 输出 -6</span></span><br></pre></td></tr></table></figure><h4 id="3-向上取整">3、向上取整</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法：Math.ceil</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">0.60</span>)) <span class="comment">// 输出 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">0.30</span>)) <span class="comment">// 输出 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">5</span>)) <span class="comment">// 输出 5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">ceil</span>(<span class="number">5.1</span>)) <span class="comment">// 输出 6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">ceil</span>(-<span class="number">5.1</span>)) <span class="comment">// 输出 -5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">ceil</span>(-<span class="number">5.9</span>)) <span class="comment">// 输出 -5</span></span><br></pre></td></tr></table></figure><h4 id="4-四舍五入">4、四舍五入</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法：Math.round</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">0.60</span>)) <span class="comment">// 输出 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">0.30</span>)) <span class="comment">// 输出 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">5</span>)) <span class="comment">// 输出 5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">5.1</span>)) <span class="comment">// 输出 6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(-<span class="number">5.1</span>)) <span class="comment">// 输出 -5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(-<span class="number">5.9</span>)) <span class="comment">// 输出 -6</span></span><br></pre></td></tr></table></figure><h4 id="5-math-配合-100-100-实现向下取整截取小数点后两位">5、Math 配合 *100/100 实现向下取整截取小数点后两位</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">22.13758</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(num*<span class="number">100</span>)/<span class="number">100</span>); <span class="comment">// 输出 22.13</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">ceil</span>(num*<span class="number">100</span>)/<span class="number">100</span>); <span class="comment">// 输出 22.14</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Math</span>.<span class="title function_">round</span>(num*<span class="number">100</span>)/<span class="number">100</span>); <span class="comment">// 输出 22.14</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num.<span class="title function_">toFixed</span>(<span class="number">2</span>)); <span class="comment">// 输出 22.14</span></span><br></pre></td></tr></table></figure><h4 id="6-截取出指定两个数字间字符串">6、截取出指定两个数字间字符串</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法：substr(a,b)</span></span><br><span class="line"><span class="comment">// a: 截取字符串起始位置，包括它自己</span></span><br><span class="line"><span class="comment">// b: 截取的位数，如果未写则默认截取到最后</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;Hello world!&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substr</span>(<span class="number">3</span>)) <span class="comment">// 输出 lo world!</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">substr</span>(<span class="number">3</span>,<span class="number">7</span>)) <span class="comment">// 输出 lo worl</span></span><br></pre></td></tr></table></figure><hr><h3 id="table列表本地分页">table列表本地分页</h3><h4 id="1-搭配elementui组件进行本地分页">1、搭配ElementUI组件进行本地分页</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br></pre></td><td class="code"><pre><span class="line">// 封装好的分页组件</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div :class=&quot;&#123;&#x27;hidden&#x27;:hidden&#125;&quot; class=&quot;pagination-container&quot;&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      :background=&quot;background&quot;</span><br><span class="line">      :current-page.sync=&quot;currentPage&quot;</span><br><span class="line">      :page-size.sync=&quot;pageSize&quot;</span><br><span class="line">      :layout=&quot;layout&quot;</span><br><span class="line">      :page-sizes=&quot;pageSizes&quot;</span><br><span class="line">      :pager-count=&quot;pagerCount&quot;</span><br><span class="line">      :total=&quot;total&quot;</span><br><span class="line">      v-bind=&quot;$attrs&quot;</span><br><span class="line">      @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">      @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; scrollTo &#125; from &#x27;@/utils/scroll-to&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;Pagination&#x27;,</span><br><span class="line">  props: &#123;</span><br><span class="line">    total: &#123;</span><br><span class="line">      required: true,</span><br><span class="line">      type: Number</span><br><span class="line">    &#125;,</span><br><span class="line">    page: &#123;</span><br><span class="line">      type: Number,</span><br><span class="line">      default: 1</span><br><span class="line">    &#125;,</span><br><span class="line">    limit: &#123;</span><br><span class="line">      type: Number,</span><br><span class="line">      default: 20</span><br><span class="line">    &#125;,</span><br><span class="line">    pageSizes: &#123;</span><br><span class="line">      type: Array,</span><br><span class="line">      default() &#123;</span><br><span class="line">        return [10, 20, 30, 50]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 移动端页码按钮的数量端默认值5</span><br><span class="line">    pagerCount: &#123;</span><br><span class="line">      type: Number,</span><br><span class="line">      default: document.body.clientWidth &lt; 992 ? 5 : 7</span><br><span class="line">    &#125;,</span><br><span class="line">    layout: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      default: &#x27;total, sizes, prev, pager, next, jumper&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    background: &#123;</span><br><span class="line">      type: Boolean,</span><br><span class="line">      default: true</span><br><span class="line">    &#125;,</span><br><span class="line">    autoScroll: &#123;</span><br><span class="line">      type: Boolean,</span><br><span class="line">      default: true</span><br><span class="line">    &#125;,</span><br><span class="line">    hidden: &#123;</span><br><span class="line">      type: Boolean,</span><br><span class="line">      default: false</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    currentPage: &#123;</span><br><span class="line">      get() &#123;</span><br><span class="line">        return this.page</span><br><span class="line">      &#125;,</span><br><span class="line">      set(val) &#123;</span><br><span class="line">        this.$emit(&#x27;update:page&#x27;, val)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    pageSize: &#123;</span><br><span class="line">      get() &#123;</span><br><span class="line">        return this.limit</span><br><span class="line">      &#125;,</span><br><span class="line">      set(val) &#123;</span><br><span class="line">        this.$emit(&#x27;update:limit&#x27;, val)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handleSizeChange(val) &#123;</span><br><span class="line">      this.$emit(&#x27;pagination&#x27;, &#123; page: this.currentPage, limit: val &#125;)</span><br><span class="line">      if (this.autoScroll) &#123;</span><br><span class="line">        scrollTo(0, 800)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    handleCurrentChange(val) &#123;</span><br><span class="line">      this.$emit(&#x27;pagination&#x27;, &#123; page: val, limit: this.pageSize &#125;)</span><br><span class="line">      if (this.autoScroll) &#123;</span><br><span class="line">        scrollTo(0, 800)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.pagination-container &#123;</span><br><span class="line">  background: #ffffff;</span><br><span class="line">  color: #000000;</span><br><span class="line">  padding: 32px 16px;</span><br><span class="line">&#125;</span><br><span class="line">.pagination-container.hidden &#123;</span><br><span class="line">  display: none;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 搭配封装好的分页组件进行本地分页</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 报文数据 --&gt;</span><br><span class="line">  &lt;div class=&quot;content-box&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;table-box&quot;&gt;</span><br><span class="line">      &lt;el-table :data=&quot;tableData&quot; style=&quot;width: 100%&quot; height=&quot;100%&quot;&gt;</span><br><span class="line">        &lt;el-table-column align=&quot;center&quot; type=&quot;index&quot; label=&quot;序号&quot; width=&quot;100&quot;&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column align=&quot;center&quot; prop=&quot;recvtime&quot; label=&quot;上报时间&quot;&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">        &lt;el-table-column align=&quot;center&quot; prop=&quot;hex&quot; label=&quot;报文类型&quot;&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">      &lt;/el-table&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;pagination</span><br><span class="line">      v-show=&quot;total &gt; 0&quot;</span><br><span class="line">      :total=&quot;total&quot;</span><br><span class="line">      :page.sync=&quot;queryParams.pageNum&quot;</span><br><span class="line">      :limit.sync=&quot;queryParams.pageSize&quot;</span><br><span class="line">      @pagination=&quot;localPagination&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; getHistoryData &#125; from &quot;@/api/monitoringCenter/singleVehicle.js&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    vin: &#123;</span><br><span class="line">      type: Number | String,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      allData: [], // 总数据</span><br><span class="line">      tableData: [], // 渲染到表格的数据</span><br><span class="line">      total: 0,</span><br><span class="line">      queryParams: &#123;</span><br><span class="line">        pageNum: 1,</span><br><span class="line">        pageSize: 10,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getList();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // 搜素</span><br><span class="line">    handleQuery() &#123;</span><br><span class="line">      this.getList();</span><br><span class="line">    &#125;,</span><br><span class="line">    // 重置</span><br><span class="line">    resetQuery() &#123;&#125;,</span><br><span class="line">    // 处理请求数据</span><br><span class="line">    handleData() &#123;</span><br><span class="line">      let obj = &#123;</span><br><span class="line">  ...this.queryParams</span><br><span class="line">      &#125;</span><br><span class="line">      obj.pageNum = 1</span><br><span class="line">      obj.pageSize = 1000000</span><br><span class="line">      obj.vin = this.vin;</span><br><span class="line">      return obj</span><br><span class="line">    &#125;,</span><br><span class="line">    localPagination(e) &#123;</span><br><span class="line">      this.queryParams.pageNum = e.page;</span><br><span class="line">      this.queryParams.pageSize = e.limit;</span><br><span class="line">      this.setData();</span><br><span class="line">    &#125;,</span><br><span class="line">    // 获取列表数据</span><br><span class="line">    async getList() &#123;</span><br><span class="line">      const res = await getHistoryData(this.handleData());</span><br><span class="line">      if (res.success) &#123;</span><br><span class="line">        this.total = res.content.length;</span><br><span class="line">        this.allData = res.content;</span><br><span class="line">        this.setData();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 本地分页</span><br><span class="line">    setData() &#123;</span><br><span class="line">      let data = [];</span><br><span class="line">      for (let i = 0; i &lt;= this.queryParams.pageSize - 1; i++) &#123;</span><br><span class="line">        if (</span><br><span class="line">          this.allData[</span><br><span class="line">            this.queryParams.pageNum * this.queryParams.pageSize -</span><br><span class="line">              this.queryParams.pageSize +</span><br><span class="line">              i</span><br><span class="line">          ]</span><br><span class="line">        ) &#123;</span><br><span class="line">          data.push(</span><br><span class="line">            this.allData[</span><br><span class="line">              this.queryParams.pageNum * this.queryParams.pageSize -</span><br><span class="line">                this.queryParams.pageSize +</span><br><span class="line">                i</span><br><span class="line">            ]</span><br><span class="line">          );</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      this.tableData = data;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.content-box &#123;</span><br><span class="line">  height: 90vh;</span><br><span class="line">  padding-top: 10px;</span><br><span class="line">  .table-box &#123;</span><br><span class="line">    height: 80%;</span><br><span class="line">    margin-bottom: 20px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="前端接受后端返回的文件流导出为文件">前端接受后端返回的文件流导出为文件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">handleExport</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 请求接口获取数据流数据(这里返回的res即是数据流数据)</span></span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">mileageDayExport</span>(data);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 下载开始</span></span><br><span class="line">    <span class="keyword">const</span> link = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> blob = <span class="keyword">new</span> <span class="title class_">Blob</span>([res], &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;application/vnd.ms-excel&quot;</span>, <span class="comment">// 下载的文件类型(excel)</span></span><br><span class="line">        <span class="comment">// type: &quot;application/zip&quot;, // 下载的文件类型(zip)</span></span><br><span class="line">    &#125;);</span><br><span class="line">    link.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">    link.<span class="property">href</span> = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span><br><span class="line">    link.<span class="property">download</span> = <span class="string">&quot;文件&quot;</span>; <span class="comment">//下载后的文件名</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(link);</span><br><span class="line">    link.<span class="title function_">click</span>();</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(link);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><hr><h3 id="vue中使用xlsx导入excel文件">Vue中使用xlsx导入excel文件</h3><h4 id="1-项目安装-xlsx-模块">1、项目安装 xlsx 模块</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install xlsx  // 在项目的node_modules文件夹和package.json文件中可以找到xlsx依赖</span><br></pre></td></tr></table></figure><h4 id="2-页面中引用xlsx模块">2、页面中引用xlsx模块</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> <span class="variable constant_">XLSX</span> <span class="keyword">from</span> <span class="string">&quot;../../node_modules/xlsx&quot;</span></span><br></pre></td></tr></table></figure><h4 id="3-选取文件对象">3、选取文件对象</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 这里使用H5原生文件上传项</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;Change&quot;</span> /&gt;</span></span><br><span class="line">// 在选择文件的过程中，触发事件的流程是下面这样的：首先触发的是鼠标按下事件mousedown，然后就是焦点到了input上面，然后鼠标抬起事件mouseup，触发click事件，失去焦点onblur以后弹出文件选择框，选中文件以后触发焦点focus，最后触发change事件。</span><br></pre></td></tr></table></figure><h4 id="4-获取选取的文件返回的数据">4、获取选取的文件返回的数据</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// input框中的Change方法</span></span><br><span class="line"><span class="title class_">Change</span>(event)&#123;</span><br><span class="line"><span class="keyword">let</span> fileList = event.<span class="property">target</span>.<span class="property">files</span>;</span><br><span class="line">    <span class="comment">// fileList是一个类数组，由传入的file对象组成</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>每个file对象包含以下属性：</strong></p><table><thead><tr><th style="text-align:center">属性</th><th style="text-align:center">属性值</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">lastModified</td><td style="text-align:center">Number</td><td style="text-align:center">表示最近一次的修改时间的时间戳</td></tr><tr><td style="text-align:center">lastModeifiedDate</td><td style="text-align:center">Object</td><td style="text-align:center">表示最后一次修改时间的Date对象，可以在其中调用Date对象的有关方法。</td></tr><tr><td style="text-align:center">name</td><td style="text-align:center">文件上传时的文件名</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">size</td><td style="text-align:center">文件的字节大小</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">type</td><td style="text-align:center">String</td><td style="text-align:center">文件的MIME类型</td></tr><tr><td style="text-align:center">weblitRelativePath</td><td style="text-align:center">当在input上添加webkitdirectory属性时，可选文件夹，此时weblitRelativePath表示文件夹中文件的相对路径。未加时为空</td><td style="text-align:center"></td></tr></tbody></table><h4 id="5-创建一个-filereader-实例">5、创建一个 FileReader 实例</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span><br><span class="line"><span class="comment">// FileReader是一种异步文件读取机制，结合input:file可以很方便的读取本地文件</span></span><br></pre></td></tr></table></figure><p><strong>FileReader提供了如下方法：</strong></p><table><thead><tr><th style="text-align:center"><strong>方法定义</strong></th><th style="text-align:center"><strong>方法定义</strong></th></tr></thead><tbody><tr><td style="text-align:center">readAsArrayBuffer(file)</td><td style="text-align:center">按字节读取文件内容，结果用ArrayBuffer对象表示</td></tr><tr><td style="text-align:center">readAsBinaryString(file)</td><td style="text-align:center">按字节读取文件内容，结果为文件的二进制串</td></tr><tr><td style="text-align:center">readAsDataURL(file)</td><td style="text-align:center">将文件读取为DataURL，因此可以读取图片。</td></tr><tr><td style="text-align:center">readAsText(file, encoding)</td><td style="text-align:center">将文件读取为文本，第二个参数是文本的编码方式，默认为utf-8</td></tr><tr><td style="text-align:center">abort()</td><td style="text-align:center">终止文件读取操作</td></tr></tbody></table><p><strong>FileReader提供了如下事件:</strong></p><table><thead><tr><th style="text-align:center">事件</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">onabort</td><td style="text-align:center">当读取操作被终止时调用</td></tr><tr><td style="text-align:center">onerror</td><td style="text-align:center">当读取操作发生错误时调用</td></tr><tr><td style="text-align:center">onload</td><td style="text-align:center">当读取操作成功完成时调用</td></tr><tr><td style="text-align:center">onloaded</td><td style="text-align:center">当读取操作完成时调用，无论成功或失败</td></tr><tr><td style="text-align:center">onloadstart</td><td style="text-align:center">当读取操作开始时调用</td></tr><tr><td style="text-align:center">onprogress</td><td style="text-align:center">在读取数据过程中周期性调用</td></tr></tbody></table><h4 id="6-读取excel主要是通过以下语句实现">6、读取excel主要是通过以下语句实现</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">XLSX</span>.<span class="title function_">read</span>(data, &#123; <span class="attr">type</span>: type &#125;);</span><br></pre></td></tr></table></figure><p><strong>type属性值如下：</strong></p><table><thead><tr><th style="text-align:center">属性值</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">base64</td><td style="text-align:center">以base64方法读取</td></tr><tr><td style="text-align:center">binary</td><td style="text-align:center">BinatyString格式(byte n is data.charCodeAt (n))</td></tr><tr><td style="text-align:center">string</td><td style="text-align:center">UTF-8编码的字符串</td></tr><tr><td style="text-align:center">buffer</td><td style="text-align:center">nodejs Buffer</td></tr><tr><td style="text-align:center">array</td><td style="text-align:center">Uint8Array，8位无符号数组</td></tr><tr><td style="text-align:center">file</td><td style="text-align:center">文件的路径(仅nodejs下支持)</td></tr></tbody></table><h4 id="7-完整示例">7、完整示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;input type=&quot;file&quot; id=&quot;uploadExcel&quot; multiple @change=&quot;Change&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import * as XLSX from &quot;../../node_modules/xlsx&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    Change(event) &#123;</span><br><span class="line">      // 判断是否为空文件</span><br><span class="line">      if (!event.target.files[0]) &#123;</span><br><span class="line">        console.log(&quot;空表格,请上传有效文件!&quot;)</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      // 获取文件的名字</span><br><span class="line">      this.pltitle = event.target.files[0].name;</span><br><span class="line">      var wb; //读取完成的数据</span><br><span class="line">      var rABS = false; //是否将文件读取为二进制字符串</span><br><span class="line">      var f = event.target.files[0]; // 拿到第一条数据</span><br><span class="line">      var reader = new FileReader();</span><br><span class="line">      reader.onerror = function (e) &#123;</span><br><span class="line">        console.error(e);</span><br><span class="line">      &#125;;</span><br><span class="line">      reader.onload = (event) =&gt; &#123;</span><br><span class="line">        var data = event.target.result;</span><br><span class="line">        if (rABS) &#123;</span><br><span class="line">          wb = XLSX.read(btoa(fixdata(data)), &#123;</span><br><span class="line">            //手动转化 文件的Base64编码</span><br><span class="line">            type: &quot;base64&quot;,</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          wb = XLSX.read(data, &#123;</span><br><span class="line">            // 二进制字符串（字节n为data.charCodeAt(n)）</span><br><span class="line">            type: &quot;binary&quot;,</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        let plUparr = XLSX.utils</span><br><span class="line">          .sheet_to_json(wb.Sheets[wb.SheetNames[0]], &#123;</span><br><span class="line">            header: [&quot;vin&quot;],</span><br><span class="line">          &#125;)</span><br><span class="line">          .splice(1);</span><br><span class="line">        this.Updatapl = JSON.parse(JSON.stringify(this.unique(plUparr, &quot;vin&quot;))); // 上传读取的数据</span><br><span class="line">        this.plUp = JSON.parse(JSON.stringify(this.unique(plUparr, &quot;vin&quot;))); // 读取的数据，转换了中文的</span><br><span class="line">        this.total = this.plUp.length;</span><br><span class="line">        this.isReader = true;</span><br><span class="line">        if (this.isReader) &#123;</span><br><span class="line">          console.log(&quot;----读取完成了----&quot;, this.plUp);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">      if (rABS) &#123;</span><br><span class="line">        reader.readAsArrayBuffer(f); </span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        reader.readAsBinaryString(f); // 将文件以二进制形式读入页面</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    // 去重除重复的数据</span><br><span class="line">    unique(arr, key1) &#123;</span><br><span class="line">      const res = new Map();</span><br><span class="line">      return arr.filter((arr) =&gt; !res.has(arr[key1]) &amp;&amp; res.set(arr[key1], 1));</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://ocean-resources.oss-cn-shenzhen.aliyuncs.com/blog/%E9%81%87%E5%88%B0%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/%E8%AF%BB%E5%8F%96%E5%87%BA%E6%9D%A5%E7%9A%84excel%E6%95%B0%E6%8D%AE.png" alt=""></p><hr><h3 id="vue中使用echarts生成map地图">Vue中使用echarts生成map地图</h3><h4 id="1-安装echarts">1、安装echarts</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install echarts --save</span><br></pre></td></tr></table></figure><h4 id="2-下载并引入china-json文件">2、下载并引入china.json文件</h4><p><strong>地址：</strong><a href="http://datav.aliyun.com/portal/school/atlas/area_selector">地图JSON数据生成</a></p><p>注意：下载之后自定义生成一个json文件进行存放数据，然后再引用调用</p><h4 id="3-示例">3、示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;managingPatientSize&quot;&gt;</span><br><span class="line">    &lt;div id=&quot;china-map&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 引入map地图json数据</span><br><span class="line">import geoJson from &quot;@/utils/china.json&quot;;</span><br><span class="line">import * as echarts from &quot;echarts&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;ChinaMap&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      provinceInfo: [</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;北京&quot;,</span><br><span class="line">          oredrNum: 599, //订单数量</span><br><span class="line">          goodsNum: 599, //货品数量</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;上海&quot;,</span><br><span class="line">          oredrNum: 142,</span><br><span class="line">          goodsNum: 599,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;黑龙江&quot;,</span><br><span class="line">          oredrNum: 44,</span><br><span class="line">          goodsNum: 599,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;深圳&quot;,</span><br><span class="line">          oredrNum: 92,</span><br><span class="line">          goodsNum: 599,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;湖北&quot;,</span><br><span class="line">          oredrNum: 810,</span><br><span class="line">          goodsNum: 599,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;四川&quot;,</span><br><span class="line">          oredrNum: 453,</span><br><span class="line">          goodsNum: 599,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;新疆&quot;,</span><br><span class="line">          oredrNum: 36,</span><br><span class="line">          goodsNum: 31,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;福建&quot;,</span><br><span class="line">          oredrNum: 106,</span><br><span class="line">          goodsNum: 30211111,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    this.drawCharts();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    drawCharts() &#123;</span><br><span class="line">      // 基于准备好的dom，初始化echarts实例</span><br><span class="line">      var chinaMap = echarts.init(document.getElementById(&quot;china-map&quot;));</span><br><span class="line">      echarts.registerMap(&quot;china&quot;, geoJson);</span><br><span class="line">      window.onresize = chinaMap.resize; // 窗口或框架被调整大小时执行chinaMap.resize</span><br><span class="line">      chinaMap.setOption(&#123;</span><br><span class="line">        // 进行相关配置</span><br><span class="line">        tooltip: &#123;</span><br><span class="line">          // 鼠标移到图里面的浮动提示框</span><br><span class="line">          backgroundColor: &quot;rgba(0,0,0,0.5)&quot;, //提示框背景色</span><br><span class="line">          borderColor: &quot;rgba(0,0,0,0)&quot;, //边框夜色</span><br><span class="line">          textStyle: &#123;</span><br><span class="line">            color: &quot;rgba(255, 255, 255, 1)&quot;, //文字颜色</span><br><span class="line">          &#125;,</span><br><span class="line">          //自定义提示框自动调用函数</span><br><span class="line">          formatter: function (params) &#123;</span><br><span class="line">            let showname = params;</span><br><span class="line">            return `</span><br><span class="line">                &lt;div style=&#x27;width:100%;height:100px&#x27;&gt;</span><br><span class="line">                    &lt;p style=&quot;font-size:12px&quot; &gt;$&#123;</span><br><span class="line">                      showname.data ? showname.data.name : &quot;暂无信息&quot;</span><br><span class="line">                    &#125;&lt;/p&gt;</span><br><span class="line">                    &lt;p style=&quot;font-size:12px&quot; &gt;订单总数:$&#123;</span><br><span class="line">                      showname.data ? showname.data.oredrNum : &quot;暂无信息&quot;</span><br><span class="line">                    &#125;&lt;/p&gt;</span><br><span class="line">                    &lt;p style=&quot;font-size:12px&quot;&gt;货品数量:$&#123;</span><br><span class="line">                      showname.data ? showname.data.goodsNum : &quot;暂无信息&quot;</span><br><span class="line">                    &#125;&lt;/p&gt; </span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">              `;</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        dataRange: &#123;</span><br><span class="line">          show: false,</span><br><span class="line">          min: 0,</span><br><span class="line">          max: 1000,</span><br><span class="line">          text: [&quot;High&quot;, &quot;Low&quot;],</span><br><span class="line">          realtime: true,</span><br><span class="line">          calculable: true,</span><br><span class="line">          color: [&quot;#fd7b78&quot;],</span><br><span class="line">        &#125;,</span><br><span class="line">        geo: &#123;</span><br><span class="line">          // 这个是重点配置区</span><br><span class="line">          map: &quot;china&quot;, // 表示中国地图</span><br><span class="line">          // roam: true, //是否允许放大</span><br><span class="line">          label: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">              show: false, // 是否显示对应地名</span><br><span class="line">              textStyle: &#123;</span><br><span class="line">                color: &quot;#fd7b88&quot;, //对应地名颜色</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          //点击变色</span><br><span class="line">          select: &#123;</span><br><span class="line">            itemStyle: &#123;</span><br><span class="line">              areaColor: &quot;#fd7b88&quot;, //点击之后的省份颜色</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          itemStyle: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">              //正常状态下的地图背景色</span><br><span class="line">              borderColor: &quot;#fff&quot;,</span><br><span class="line">              borderWidth: &quot;0.5&quot;,</span><br><span class="line">              color: new echarts.graphic.LinearGradient( // 渐变色</span><br><span class="line">                0,</span><br><span class="line">                0,</span><br><span class="line">                1,</span><br><span class="line">                0, // 渐变色的起止位置, 右/下/左/上</span><br><span class="line">                [</span><br><span class="line">                  // offset 位置</span><br><span class="line">                  &#123; offset: 0.8, color: &quot;#f2aca0&quot; &#125;,</span><br><span class="line">                  &#123; offset: 0, color: &quot;#fd7b78&quot; &#125;,</span><br><span class="line">                ]</span><br><span class="line">              ),</span><br><span class="line">            &#125;,</span><br><span class="line">            emphasis: &#123;</span><br><span class="line">              areaColor: null,</span><br><span class="line">              shadowOffsetX: 0,</span><br><span class="line">              shadowOffsetY: 0,</span><br><span class="line">              shadowBlur: 20, //聚焦时候的阴影范围</span><br><span class="line">              borderWidth: 0,</span><br><span class="line">              shadowColor: &quot;#f04b30&quot;, //聚焦时候的阴影颜色</span><br><span class="line">              // 鼠标放上去地图区域背景颜色</span><br><span class="line">              areaColor: &quot;#fd7b78&quot;, //聚焦之后的颜色</span><br><span class="line">              borderWidth: 0,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        series: [</span><br><span class="line">          &#123;</span><br><span class="line">            type: &quot;scatter&quot;,</span><br><span class="line">            coordinateSystem: &quot;geo&quot;, // 对应上方配置</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            // name: &quot;启动次数&quot;, // 浮动框的标题</span><br><span class="line">            type: &quot;map&quot;,</span><br><span class="line">            geoIndex: 0,</span><br><span class="line">            data: this.provinceInfo,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;);</span><br><span class="line">      // 地图打点-----</span><br><span class="line">      var cityData = [</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;北京&quot;,</span><br><span class="line">          oredrNum: 599, //订单数量</span><br><span class="line">          goodsNum: 599, //货品数量</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;天津&quot;,</span><br><span class="line">          ename: &quot;天津&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;上海&quot;,</span><br><span class="line">          oredrNum: 142,</span><br><span class="line">          goodsNum: 599,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;重庆&quot;,</span><br><span class="line">          ename: &quot;重庆&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;河北&quot;,</span><br><span class="line">          ename: &quot;河北&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;河南&quot;,</span><br><span class="line">          ename: &quot;河南&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;云南&quot;,</span><br><span class="line">          ename: &quot;云南&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;辽宁&quot;,</span><br><span class="line">          ename: &quot;辽宁&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;黑龙江&quot;,</span><br><span class="line">          oredrNum: 44,</span><br><span class="line">          goodsNum: 599,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;湖南&quot;,</span><br><span class="line">          ename: &quot;湖南&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;安徽&quot;,</span><br><span class="line">          ename: &quot;安徽&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;山东&quot;,</span><br><span class="line">          ename: &quot;山东&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;新疆&quot;,</span><br><span class="line">          oredrNum: 1, //订单数量</span><br><span class="line">          goodsNum: 599, //货品数量</span><br><span class="line">          ename: &quot;新疆&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;江苏&quot;,</span><br><span class="line">          ename: &quot;江苏&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;浙江&quot;,</span><br><span class="line">          value: 3,</span><br><span class="line">          ename: &quot;浙江&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;江西&quot;,</span><br><span class="line">          ename: &quot;江西&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;湖北&quot;,</span><br><span class="line">          oredrNum: 810,</span><br><span class="line">          goodsNum: 599,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;广西&quot;,</span><br><span class="line">          ename: &quot;广西&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;甘肃&quot;,</span><br><span class="line">          ename: &quot;甘肃&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;山西&quot;,</span><br><span class="line">          ename: &quot;山西&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;内蒙古&quot;,</span><br><span class="line">          ename: &quot;内蒙古&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;陕西&quot;,</span><br><span class="line">          ename: &quot;陕西&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;吉林&quot;,</span><br><span class="line">          ename: &quot;吉林&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;福建&quot;,</span><br><span class="line">          oredrNum: 106,</span><br><span class="line">          goodsNum: 30211111,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;贵州&quot;,</span><br><span class="line">          ename: &quot;贵州&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;广东&quot;,</span><br><span class="line">          value: 53,</span><br><span class="line">          ename: &quot;广东&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;青海&quot;,</span><br><span class="line">          ename: &quot;青海&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;西藏&quot;,</span><br><span class="line">          ename: &quot;西藏&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;四川&quot;,</span><br><span class="line">          oredrNum: 453,</span><br><span class="line">          goodsNum: 599,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;宁夏&quot;,</span><br><span class="line">          ename: &quot;宁夏&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;海南&quot;,</span><br><span class="line">          ename: &quot;海南&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;台湾&quot;,</span><br><span class="line">          ename: &quot;台湾&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;香港&quot;,</span><br><span class="line">          ename: &quot;香港&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          name: &quot;澳门&quot;,</span><br><span class="line">          ename: &quot;澳门&quot;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ];</span><br><span class="line">      const geoCoordMap = &#123;</span><br><span class="line">        广东: [113.75, 23.04],</span><br><span class="line">        黑龙江: [128.34, 47.05],</span><br><span class="line">        北京: [116.4, 40.4],</span><br><span class="line">        新疆: [86.61, 40.79],</span><br><span class="line">        内蒙古: [112.17, 42.81],</span><br><span class="line">        青海: [97.07, 35.62],</span><br><span class="line">        西藏: [89.13, 30.66],</span><br><span class="line">      &#125;;</span><br><span class="line">      this.convertData = (data) =&gt; &#123;</span><br><span class="line">        var res = [];</span><br><span class="line">        for (var i = 0; i &lt; data.length; i++) &#123;</span><br><span class="line">          var geoCoord = geoCoordMap[data[i].name];</span><br><span class="line">          if (geoCoord) &#123;</span><br><span class="line">            res.push(&#123;</span><br><span class="line">              name: data[i].name,</span><br><span class="line">              value: geoCoord.concat(data[i].value), //将上面数组的value添加到经纬度后面</span><br><span class="line">              oredrNum: data[i].oredrNum ? data[i].oredrNum : &quot;暂无数据&quot;,</span><br><span class="line">              goodsNum: data[i].goodsNum ? data[i].goodsNum : &quot;暂无数据&quot;,</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return res;</span><br><span class="line">      &#125;;</span><br><span class="line">      this.getMapChart(cityData);</span><br><span class="line">    &#125;,</span><br><span class="line">    //处理涟漪特效的函数</span><br><span class="line">    getMapChart(data) &#123;</span><br><span class="line">      var myChart = echarts.init(document.getElementById(&quot;china-map&quot;));</span><br><span class="line">      var option = &#123;</span><br><span class="line">        tooltip: &#123;</span><br><span class="line">          show: true,</span><br><span class="line">          textStyle: &#123;</span><br><span class="line">            color: &quot;#fff&quot;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        series: [</span><br><span class="line">          &#123;</span><br><span class="line">            type: &quot;effectScatter&quot;, //图例类型</span><br><span class="line">            coordinateSystem: &quot;geo&quot;, //使用geo地图</span><br><span class="line">            symbol:</span><br><span class="line">              &quot;image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAMxUlEQVR4nO3dbW4TyRYG4FMZG90QpIQ/V8oHIrOCMSvArCDMChJWQFgBsAKSFeBZwWRWgFkBmRUQlEwi3T+ARADFJue+ZeMhCnHFH237nOr3kXpcZv7Y3f2m61RVt4MQUV8MCFECA0KUwIAQJTAgRAkMCFECA0KUwIAQJTAgRAkMCFECA0KUwIAQJTAgRAkMCFECA0KUwIAQJTAgRAkMCFECA0KUwIBMmb5/v9T++vU31XYthLklUa1Lj2pNQlhC62eqH/D/9tHqCqEZRA9UfjmoLi+/xr/QBARsNEH6v6Na+1vYwAlex1bDib2Efy5eJ0DSVJFmtRJeh/+u7eNfaUwMSMH05GS9pe0N7Ni6KLZJBeI6FwMzf+uPcPv2B/wrDQnHkcYVu03fvp5uqMqWxGCYpHtB5xqV1dW/8IYGxICMoXVyWNfzsBlEH87sSjEsXFlUwl61Krvshl2PARlBDIZoeIpmXXxrStDn1eU7TaErBWw0oPbJ0eb5uWyHIDW8zUlTGJQrMSADiFcMdKVeZBiMy5qVijxh1+sHBiQhFt+tz6cxGFtSLjuV+YXnHPliQPo6Oz58HFSeuSm+C6YiB3My96SysrKHt6XFgFzSmcc4//Ynrho1vCUMD1fmbz0q69WEAbmgfXz8UPXby7JeNfqJV5NqRX4vY23CgHzXOj56gZdtbNSHim7fWLmzi2ZplD4g3wvxV+xSDapcXa5SB6SzkLClr9ilGo6q7FdvLjwoQ0hKGxCGYzydkFTlUe51SSkDwmK8IKofKtXwIOeQlC4g7ZOjLfz1e4kmFSHzkJQqIHHJiGh4hSYVKeOQBGylwJpjwmJI5ir3wvLygWSkFAFhOKYDXdfsRreyD0hnnuPL6Rt80XWhicstJAFb1jBDHmuOutDUICSNG6trj9B0L2DLVuufw2foVj1Fk6YsBHlUWV5riHPZBoQjVjMWi/YMRrYCtuzEuqP9+dNb/BlbwluaEXS13NcjWQaEdYcpu9WVtW28upRdQDrLSOT8TzTJiqAPvD4QIquAxK4Vh3TtiV0tjGrdQ9OdgC0bHLWyS0We3FhZ20HTlWwC0pktb8sbNMmiOKp189av3gr2bALCwtw+FfkDV5EtcSSLgHie81CRd3hpznWexK4Hlf/c2r/8VzbWVu2vn2qqoYa3tRCfBSxhEW13KuGXXz0taAzY3PN39dCP2PWNSkUao06kxT8KCMxWcBYWdXYVcR+Q+Byrtn57i6YDCIbKDvriO5evEqPqXF0+f9rGkdzG4bQfFGe1iPuAnB0fNfAlNtG0brcyv/BsUidG9w9FeweHdANvbVN9Xl2980wcwLnlV/eksH71wFUjyMNpTZR1bynWGJRFvLVJ/VxFXAfE+rwHJsj+rt5cqE/7RIhD3q227OHg3sVbk4KT1b7Yh36he/UWX2BdDJpVOHpibdL6fNrEifgb3lrUrK6sPcCraQGbS3EUx+rQ7qzD0WM9JB6GfAM2l3D1aODDb6JpimJeozq/UJt1OHpid6vd1iYO9aIYg31lfvkJzjGfUH+8F4P3e2Bu496ocxuTYnWFMwJygID8iqZZAZs7Vg84+lZmhy8xmbqDl8fYTLHezXIZEIsHO9YdN1bXamiaFOuR9pdPBzjki2IIriKmu1kuA3L2z9GbEKSGph0ObgrqzpHISzQN0b+qK3ceomGSu4B0/xKevkfTEH2Ng1wXBzC4cYCDfhdNGzBpiG7pbbRMwr7yxWL9gauZi0mvCAHZxkF/gaYZFgc2erCvfLFXf+hHXD2W0HDB4vIcNVyHOAzIYRMf+74Yoc6Wb0eo4fZx1fsNTRPU8D70FxBj8x840dx0r3qwD5/hgz9F0wi7NZy/gBwfKV7MsD6OfxVzy3QMF+oBmxvmDqyz+uMic39o5hduW1mec1HA5oa9cXy7XYProJbDyRgW0bTB6DySq4Cw71wcBKQphgY7rNZyDMgY1PDoy3WsBUSMrmPzFZDjwz185A00bTB6UAeBfdnEvmRAruEtIE18ZDsH1fg6ohRz+5IBGZ+5g8oapEi71ZW1bbyawoCMxXNAbA3zWt2XDMiY8FfP1T6MuCJ6cK4OrsWAWF6J2o/FFdEMSAEsBkQNr0TtB92r+HkfYzPE5oAHAzI2mwc25cziHZkcxRqfzYCgm2V0HdFVuo8BMvhDQwzI+M6OzT4Ly003y2b3ChiQ8VlbatKjYv/5TlFn9Mrq78czIOOzGpAoGF1sd5Hl/cfVvAWwdz/IBWr7kf4W70W/yOpwecDmhtkC84ddTBxu49Uc1B6v8FIXo7DfTJ6LJj9UCg604sWsIHO/V1ZW9tA0w3TXClTkHWq4dTHIXUAwknWAD30XTZtiV6saHljpLpjulv7L5ix6FLC5grmQPXzsDTTtiiGZq9yb9cMcOl3Slr7C1WMJby0z2zX1FxDj3YV/xZDM8EriKBw4Ce11S3v8BeTksG6/y/AdQiJz8vu0hy87D7c41xcewhFZfnRSwOaO9UL9JyE8qy6vPkdrojoTgV9On6K5jc0FNVygRwGbO6hDmvjo98URVdkPc/pkUleTeGVVDS9xQNfFETX+4IuAzR1cQXbw8hibQ7qHvb5bVFBiMNDlfIpmXRxS4+vYAjZ3bN7wM5x4RZGgjWqo/DVs/zvOire0vYHDF3/KYF0cs1x/RAGbS+hmfcDHX0TTPfwVPcB/mmEuHIjMNeWScH6+pHNSQ+G9jiNWx0Fblwzge7/D1WNdDAvYXMKEYQMffhNN8svs/EcPzjGfOkOZKi/RJKesLlC8yG1Avg9pvkeTHFIH3avIbUAi1CF7+AobaJI/5rtXkeuAsJvlmNEbpC5zHZBuN8vej+NTmjrpXkWuAxJxNMsfNT45eBHOLd86q1Zt32VIl3h6TJL7gERnxn7WmFJ8PWgvi4CwWPfD8r0fV8kiICzWfVBHxXlPFgGJ3NxpWGLoBpt/dthl2QQkrnC1/Nwn0o+V+VvrXorznmwCEnHI1zCjjxa9Ds6nfPAqYpXPq0eUVUAirs+yR8X2bbUp+QXk5LAuGl6hSUZYv2swJWDLDq4iTXy1+0IW7HpYtdtPlgFhLWKF39qjJ8uARBzRMsDpyNVFOIfyxKvIrPm/ekTZBiTiVWSGMrh6RDh/8tW9irT38TUX8ZamREXeVecXat6vHlHWAYm4Rmv6gsM1V/1kH5AIXa0DfNG7aNLE2f0xnFHgvMlfDo8q9cLDs66GUYqARJw8nDx1vKSkn9IEpFuwc9h3cvIY1r2sNAGJfP9sgm3q6EklwyhVQOKtua0vp/v40nfxlgqiKn/fWF2roZkdnCvlwoK9eLkV5heVLiARCvY9fPUNNGlcmcyY91PKgMSuFp+CMj7NaMa8n1IGJMLk4Ta+/As0aVROHkA9Dpwj5YWuVhO74L7QCHw9IXFUpQ5Id26kvY/dsIi3NLA85zyuUuqAROxqjaAEXasenBvErtZQdj3fYz4sBgTY1RqMlmDU6jIG5Dt2tQZQoq5VD84J6kFXaw+7ZANN+lmpulY9DMgFnEC8WlxrVb25UC9T16qHAbmET2b8Wc5rra4TsNElXBb/g2a6jH1QDEgf/N3DqByz5SkMSB/dX8/VJnbRopRSeWbLUxiQhFIP/ZZwSPcqOP6UUtKh390yDulehQG5Rhz6LdNtunFIN9fbZ0eB407X6dYj8gbNzKHuCJWa1x+7mQQGZEBlqEe8/cj/NOCY06Ayr0dYd1yBARlCrvUI647+cKxpGPnVI6w7UhiQEbRPjrbwV/clmv5xviOJARkRivYGdt4mmn5l/kyrIuAY0yg69cjn02Zwu16L66wGwYCMweutulrCW2dHxYCMyd+zflGUV0K9rPd3DIsBKYCn30FElzCb3w+cBgakIE4mEXc5GTgcBqQg9ov2vH5cc1oYkAJ1JxG1id26KIYoi/KRMSAFs1e0sygfBwMyAZaKdnT5WJSPgQGZECNFO4vyMTEgEzL7op1FeREYkAmaVdGuLMoLw4BM2PSf1MiivEgBG03Y2RRv1+Vts8XCcaNpQEga2NmbaE4Ol68XDseMpmWSjzNVkT9urKxtCRWKAZmizsjWBO5pVy3vzxNMGo4VTVPxI1soyvkM3YlhQGagyHvay/zbHdPAgMxIEctRUM9wGcmEMSAzNObIFpeRTAGOD81Kp2gfaTkKH7gwLQzIjMWQDPPDoahdOGI1RQyIAYOObDEc08eAGBFD0mpJo393S19jOPchwzFdDIgx3SFgfYhmXbqaQX5pcH3VbDAgRAkMCFECA0KUwIAQJTAgRAkMCFECA0KUwIAQJTAgRAkMCFECA0KUwIAQJTAgRAkMCFECA0KUwIAQJTAgRAkMCFECA0KUwIAQJfwf22NjI6gMEAoAAAAASUVORK5CYII=&quot;, //图例样式</span><br><span class="line">            showEffectOn: &quot;emphasis&quot;, //涟漪特效何时触发</span><br><span class="line">            symbolSize: 20, //图例大小,</span><br><span class="line">            symbolOffset: [0, -10],</span><br><span class="line">            rippleEffect: &#123;</span><br><span class="line">              //特效设置</span><br><span class="line">              scale: 2.5,</span><br><span class="line">              color: &quot;rgba(207, 55, 55, 1)&quot;,</span><br><span class="line">              number: 3,</span><br><span class="line">            &#125;,</span><br><span class="line">            showEffectOn: &quot;render&quot;,</span><br><span class="line">            data: this.convertData(data),</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;;</span><br><span class="line">      myChart.on(&quot;click&quot;, (params) =&gt; &#123;&#125;);</span><br><span class="line">      myChart.setOption(option);</span><br><span class="line">      window.onresize = () =&gt; &#123;</span><br><span class="line">        myChart.resize();</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.managingPatientSize &#123;</span><br><span class="line">  width: 100vw;</span><br><span class="line">  height: 100vh;</span><br><span class="line">  background-color: #111b41;</span><br><span class="line">  color: #fff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#china-map &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="4-效果">4、效果</h4><p><img src="https://ocean-resources.oss-cn-shenzhen.aliyuncs.com/blog/%E9%81%87%E5%88%B0%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/echarts%E5%9C%B0%E5%9B%BE.png" alt=""></p><hr><h3 id="数组处理">数组处理</h3><h4 id="1-将数组数据转化成树形结构数据">1、将数组数据转化成树形结构数据</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义扁平化数据处理为树形结构数据方法</span></span><br><span class="line"><span class="title function_">formatTree</span>(<span class="params">root, data, parentKey, key</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> copyedObj = data;</span><br><span class="line">    <span class="keyword">return</span> copyedObj.<span class="title function_">filter</span>(<span class="function"><span class="params">parent</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> child = copyedObj.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> parent[key] == item[parentKey];</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span> (child.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            parent.<span class="property">children</span> = child;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            parent.<span class="property">children</span> = [];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> parent[parentKey] == root; <span class="comment">//返回顶层，依据实际情况判断这里的返回值</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 调用方法</span></span><br><span class="line"><span class="keyword">let</span> root = <span class="number">0</span> <span class="comment">// 根节点，最大的一级(根据实际环境进行赋值)</span></span><br><span class="line"><span class="keyword">let</span> data = [] <span class="comment">// 需要转化的扁平化数据数组</span></span><br><span class="line"><span class="keyword">let</span> parentKey = <span class="string">&quot;parentId&quot;</span>; <span class="comment">// 父节点key</span></span><br><span class="line"><span class="keyword">let</span> key = <span class="string">&quot;deptId&quot;</span>; <span class="comment">// 子节点key</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="title function_">formatTree</span>(root, data, parentKey, key),<span class="string">&#x27;--------处理后的数据-------&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="2-实现数组的任意倍数分组">2、实现数组的任意倍数分组</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义分组处理方法</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">divisionArr</span> = (<span class="params">list, times</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> mapTimes = <span class="title class_">Math</span>.<span class="title function_">floor</span>(list.<span class="property">length</span> / times);</span><br><span class="line">  <span class="keyword">const</span> result = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; mapTimes; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> arr = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; times; j++) &#123;</span><br><span class="line">      arr.<span class="title function_">push</span>(list[i * times + j]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    result.<span class="title function_">push</span>(arr);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (list.<span class="property">length</span> % times) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> k = <span class="number">1</span>; k &lt;= list.<span class="property">length</span> % times; k++) &#123;</span><br><span class="line">      result.<span class="title function_">push</span>([list.<span class="title function_">at</span>(-k)]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用方法</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line"><span class="title function_">divisionArr</span>(arr, <span class="number">4</span>); <span class="comment">// [[1, 2, 3, 4], [5, 6, 7, 8], [9]]</span></span><br></pre></td></tr></table></figure><h4 id="3-将数组中的第一项与最后一项调换位置">3、将数组中的第一项与最后一项调换位置</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> a = arr.<span class="title function_">filter</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> index &gt; <span class="number">0</span> &amp;&amp; index &lt; (arr.<span class="property">length</span> - <span class="number">1</span>)</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">let</span> arr2 = [arr[arr.<span class="property">length</span>-<span class="number">1</span>],...a,arr[<span class="number">0</span>]];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr2) <span class="comment">// [4, 2, 3, 1]</span></span><br></pre></td></tr></table></figure><h4 id="4-数组的删除-插入-替换">4、数组的删除、插入、替换</h4><h5 id="删除"><strong>删除</strong></h5><table><thead><tr><th style="text-align:center">写法</th><th style="text-align:center">参数含义</th></tr></thead><tbody><tr><td style="text-align:center">array.splice(index,n)</td><td style="text-align:center">index：数组中需要删除数据的起始位置；<br />n：需要删除的元素，数据的个数；</td></tr></tbody></table><h5 id="插入">插入</h5><table><thead><tr><th style="text-align:center">写法</th><th style="text-align:center">参数含义</th></tr></thead><tbody><tr><td style="text-align:center">array.splice(index,0,data1,data2,…)</td><td style="text-align:center">index：数组中需要插入数据的起始位置；<br />0：删除的个数为0；<br />data1,data2：需要插入的元素，用逗号隔开</td></tr></tbody></table><h5 id="替换">替换</h5><table><thead><tr><th style="text-align:center">写法</th><th style="text-align:center">参数含义</th></tr></thead><tbody><tr><td style="text-align:center">array.splice(index,n,data1,data2,…)</td><td style="text-align:center">index：需要替换的元素的起始位置；<br />n：需要替换的元素的个数，实质是删除；<br />data1，data2：需要插入元素，用逗号隔开；</td></tr></tbody></table><hr><h3 id="时间日期处理">时间日期处理</h3><h4 id="1-获取当天日期与30天前日期">1、获取当天日期与30天前日期</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myDate = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"><span class="keyword">let</span> today = myDate.<span class="title function_">toISOString</span>().<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">10</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(today, <span class="string">&quot;当天日期&quot;</span>); <span class="comment">// 当天日期</span></span><br><span class="line"><span class="keyword">let</span> lw = <span class="keyword">new</span> <span class="title class_">Date</span>(myDate - <span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">30</span>); <span class="comment">// 最后一个数字30可改(为30天前)</span></span><br><span class="line"><span class="keyword">let</span> lastY = lw.<span class="title function_">getFullYear</span>();</span><br><span class="line"><span class="keyword">let</span> lastM = lw.<span class="title function_">getMonth</span>() + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> lastD = lw.<span class="title function_">getDate</span>();</span><br><span class="line"><span class="keyword">let</span> startdate =</span><br><span class="line">  lastY +</span><br><span class="line">  <span class="string">&quot;-&quot;</span> +</span><br><span class="line">  (lastM &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + lastM : lastM) +</span><br><span class="line">  <span class="string">&quot;-&quot;</span> +</span><br><span class="line">  (lastD &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + lastD : lastD); <span class="comment">// 三十天前日期</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(startdate, <span class="string">&quot;三十天前日期&quot;</span>);</span><br></pre></td></tr></table></figure><h4 id="2-计算当前时间与指定时间之间相差的天数小时">2、计算当前时间与指定时间之间相差的天数小时</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>() <span class="comment">// 当前时间</span></span><br><span class="line"><span class="keyword">let</span> target = <span class="string">&#x27;2022-11-11 15:00:00&#x27;</span></span><br><span class="line"><span class="keyword">let</span> time = ((<span class="title class_">Date</span>.<span class="title function_">parse</span>(date)-<span class="title class_">Date</span>.<span class="title function_">parse</span>(target))/(<span class="number">60</span>*<span class="number">60</span>*<span class="number">1000</span>)).<span class="title function_">toFixed</span>(<span class="number">0</span>) <span class="comment">// 得到相差的小时数</span></span><br><span class="line"><span class="keyword">if</span>(time&lt;<span class="number">24</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> time+<span class="string">&#x27;小时&#x27;</span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(time==<span class="number">24</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;1天&#x27;</span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(time&gt;<span class="number">24</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> (time/<span class="number">24</span>).<span class="title function_">toFixed</span>(<span class="number">0</span>)+<span class="string">&#x27;天&#x27;</span>+(time%<span class="number">24</span>)+<span class="string">&#x27;小时&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="微信小程序">微信小程序</h3><h4 id="1-获取图片信息">1、获取图片信息</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取相对路径图片信息</span></span><br><span class="line">wx.<span class="title function_">getImageInfo</span>(&#123;</span><br><span class="line">  <span class="attr">src</span>: <span class="string">&#x27;images/a.jpg&#x27;</span>,</span><br><span class="line">  success (res) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">width</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">height</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 选取相册中的图片并获取图片信息</span></span><br><span class="line">wx.<span class="title function_">chooseImage</span>(&#123;</span><br><span class="line">  success (res) &#123;</span><br><span class="line">    wx.<span class="title function_">getImageInfo</span>(&#123;</span><br><span class="line">      <span class="attr">src</span>: res.<span class="property">tempFilePaths</span>[<span class="number">0</span>],</span><br><span class="line">      success (res) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">width</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">height</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="2-base64图片下载至手机相册">2、<strong>base64图片下载至手机相册</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// WXML</span></span><br><span class="line">&lt;image src=<span class="string">&quot;data:image/png;base64,&#123;&#123;imgBase64&#125;&#125;&quot;</span> mode=<span class="string">&quot;widthFix&quot;</span> <span class="keyword">class</span>=<span class="string">&quot;img&quot;</span> bindtap=<span class="string">&quot;saveImage&quot;</span>&gt;&lt;/image&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// JS</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 页面的初始数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">imgBase64</span>:<span class="string">&#x27;iVBORw0KGgoAAAANSUhEUgAAAPAAAADwAQAAAAAWLtQ/AAACIUlEQVR4Xu2XUWoFIQxFA25LyNYFtyXYe+IrzHRs+2W+Jq+ddjwWLslNtDb/DPu5cI8Xb+PF23jxNl68jcDDzHw2n6O0Wo0PCzlYQGveR63ezPRkLQcHY6W3wjMW8rBC0jzSUnkkYnJiPoq2jFRMSbyVqaRYaY+SHMWGBa7xcOoxvKKF+8vAGd9xHkuaSC1TViQ9KkxfWxKw62OlN+rheldNNAxyMB6k/TpdgEg25ODZxVg0ubHS/naVdhRH1xcUslH68ET8XQIOSZ/R4xr6UaQcPIHURKWp1MVJTBKW52V+ZcO75EUzXKUdxbAYONIUQ9dq0AyMIWgFHe8YEYm3khzEg7YjEYjSFFJyNPuTcNFbxwJ0IuJs0QxsBAasdGGkxpPwJCPR/npyrdOOy7g/ipEmP9CE0qfzzh8VO4Zj2HGFjT5AWf057s9hGR8HqhIaQVGOe0kO4hju2K+jyqILWvDzWA5ozgRQZiquLLgjBzPldJFR5yk5JZqxrLwkYFVfeRgUhfI4BolIwBJGXcKOzm6VJQ3ra9B37On04cpKBg7v64CTE7lLseHm1JOY20xnAvELtYmGTMGxRcK43EiScvPpggQ8OGhi5MkMjZePsgzsZAYvtOVFeeNWkpNY/xErlgGVH0oSNAtr1MWwDWlLWBpm0Eb3NcpxO4GPYqkJbfomNW39yMHLfVIj+3PFeF7njuHf48XbePE2XryNF2/jH/wFLoQaLMaajWoAAAAASUVORK5CYII=&#x27;</span>, <span class="comment">// 测试base64图片路径</span></span><br><span class="line">    <span class="attr">verifyCode</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">   <span class="comment">// 保存图片到相册</span></span><br><span class="line">  <span class="title function_">saveImage</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> _this = <span class="variable language_">this</span></span><br><span class="line">    wx.<span class="title function_">showModal</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;提示&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: <span class="string">&#x27;是否保存二维码&#x27;</span>,</span><br><span class="line">        <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (res.<span class="property">confirm</span>) &#123;</span><br><span class="line">                <span class="comment">//获取文件管理器对象</span></span><br><span class="line">                <span class="keyword">const</span> fs = wx.<span class="title function_">getFileSystemManager</span>()</span><br><span class="line">                <span class="comment">//文件保存路径(保存到本地的图片路径)</span></span><br><span class="line">                <span class="keyword">const</span> <span class="title class_">Imgpath</span> = wx.<span class="property">env</span>.<span class="property">USER_DATA_PATH</span> + <span class="string">&#x27;/qrcodeImg&#x27;</span> + <span class="string">&#x27;.png&#x27;</span></span><br><span class="line">                <span class="comment">//_this.data.imgBase64(base64图片文件)  </span></span><br><span class="line">                <span class="keyword">let</span> imageSrc = _this.<span class="property">data</span>.<span class="property">imgBase64</span>.<span class="title function_">replace</span>(<span class="regexp">/^data:image\/\w+;base64,/</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                <span class="comment">//写入本地文件</span></span><br><span class="line">                fs.<span class="title function_">writeFile</span>(&#123;</span><br><span class="line">                    <span class="attr">filePath</span>: <span class="title class_">Imgpath</span>,</span><br><span class="line">                    <span class="attr">data</span>: imageSrc,</span><br><span class="line">                    <span class="attr">encoding</span>: <span class="string">&#x27;base64&#x27;</span>,</span><br><span class="line">                    success (res) &#123;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">                    <span class="comment">//保存到手机相册</span></span><br><span class="line">                    wx.<span class="title function_">saveImageToPhotosAlbum</span>(&#123;</span><br><span class="line">                        <span class="attr">filePath</span>: <span class="title class_">Imgpath</span>,</span><br><span class="line">                        <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">                        wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">                            <span class="attr">title</span>: <span class="string">&#x27;保存成功&#x27;</span>,</span><br><span class="line">                            <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">                        &#125;)</span><br><span class="line">                        &#125;,</span><br><span class="line">                        <span class="attr">fail</span>:<span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;失败了&quot;</span>)</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(err)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="3-canvas生成图片并保存到相册">3、<strong>canvas生成图片并保存到相册</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// WXML</span></span><br><span class="line">&lt;!-- 画布 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">type</span>=<span class="string">&quot;2d&quot;</span> <span class="attr">id</span>=<span class="string">&quot;myCanvas&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></span><br><span class="line">&lt;!-- 保存 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">text</span> <span class="attr">bindtap</span>=<span class="string">&quot;saveImage&quot;</span>&gt;</span>点击保存至相册<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// WXSS</span></span><br><span class="line">#myCanvas&#123;</span><br><span class="line">    <span class="attr">position</span>: absolute;</span><br><span class="line">    <span class="attr">top</span>: -99999999px;</span><br><span class="line">    <span class="attr">left</span>: 9999999999px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// JS</span></span><br><span class="line"><span class="title function_">saveImage</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> that = <span class="variable language_">this</span></span><br><span class="line">    wx.<span class="title function_">createSelectorQuery</span>().<span class="title function_">select</span>(<span class="string">&#x27;#myCanvas&#x27;</span>).<span class="title function_">fields</span>(&#123;</span><br><span class="line">      <span class="attr">node</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">size</span>: <span class="literal">true</span></span><br><span class="line">    &#125;).<span class="title function_">exec</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 获取设备设备像素比</span></span><br><span class="line">      <span class="keyword">const</span> dpr = wx.<span class="title function_">getSystemInfoSync</span>().<span class="property">pixelRatio</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">let</span> textCanvas = res[<span class="number">0</span>].<span class="property">node</span> <span class="comment">// 重点1</span></span><br><span class="line">      textCanvas.<span class="property">width</span> = res[<span class="number">0</span>].<span class="property">width</span> * dpr</span><br><span class="line">      textCanvas.<span class="property">height</span> = res[<span class="number">0</span>].<span class="property">height</span> * dpr</span><br><span class="line"></span><br><span class="line">      textCtx = textCanvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>) <span class="comment">// 重点2</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">/**至此，textCanvas，textCtx已经成功获取到，下面代码为绘图测试代码可忽略**/</span></span><br><span class="line">      textCtx.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, textCanvas.<span class="property">_width</span>, textCanvas.<span class="property">_height</span>)</span><br><span class="line">      textCtx.<span class="title function_">beginPath</span>();</span><br><span class="line">      textCtx.<span class="title function_">scale</span>(dpr, dpr)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 未避免部分内容在画布中显示不出来，采用同步执行绘制画布</span></span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// 绘制图片</span></span><br><span class="line">          <span class="keyword">const</span> bg = textCanvas.<span class="title function_">createImage</span>()</span><br><span class="line">          bg.<span class="property">src</span> = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">canvasImage</span> <span class="comment">// 绘制图片的url地址(自行替换)</span></span><br><span class="line">          bg.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">              textCtx.<span class="title function_">drawImage</span>(bg, <span class="number">0</span>, <span class="number">0</span>, <span class="number">250</span>, <span class="number">150</span>)</span><br><span class="line">              <span class="title function_">resolve</span>(<span class="literal">true</span>)</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="comment">// 绘制文字</span></span><br><span class="line">              textCtx.<span class="property">font</span> = <span class="string">&quot;bold 14px sans-serif&quot;</span>;</span><br><span class="line">              textCtx.<span class="property">fillStyle</span> = <span class="string">&quot;black&quot;</span>;</span><br><span class="line">              textCtx.<span class="title function_">fillText</span>(</span><br><span class="line">                  <span class="string">`二维码`</span>,</span><br><span class="line">                  <span class="number">85</span>,</span><br><span class="line">                  <span class="number">15</span>,</span><br><span class="line">                  <span class="number">250</span></span><br><span class="line">              );</span><br><span class="line">              <span class="title function_">resolve</span>(<span class="literal">true</span>)</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="comment">// 绘制文字</span></span><br><span class="line">              textCtx.<span class="property">font</span> = <span class="string">&quot;12px sans-serif&quot;</span>;</span><br><span class="line">              textCtx.<span class="property">fillStyle</span> = <span class="string">&quot;black&quot;</span>;</span><br><span class="line">              textCtx.<span class="title function_">fillText</span>(</span><br><span class="line">                  <span class="string">`订单二维码：<span class="subst">$&#123;that.data.verifyCode&#125;</span>`</span>,</span><br><span class="line">                  <span class="number">25</span>,</span><br><span class="line">                  <span class="number">142</span>,</span><br><span class="line">                  <span class="number">250</span></span><br><span class="line">              );</span><br><span class="line">              <span class="title function_">resolve</span>(<span class="literal">true</span>)</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// 保存图片</span></span><br><span class="line">          wx.<span class="title function_">showModal</span>(&#123;</span><br><span class="line">              <span class="attr">title</span>: <span class="string">&#x27;提示&#x27;</span>,</span><br><span class="line">              <span class="attr">content</span>: <span class="string">&#x27;是否保存二维码&#x27;</span>,</span><br><span class="line">              <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">res</span>) &#123;</span><br><span class="line">                  <span class="keyword">if</span> (res.<span class="property">confirm</span>) &#123;</span><br><span class="line">                      <span class="comment">// 获取canvas生成的图片</span></span><br><span class="line">                      wx.<span class="title function_">canvasToTempFilePath</span>(&#123;</span><br><span class="line">                          <span class="attr">x</span>: <span class="number">0</span>,</span><br><span class="line">                          <span class="attr">y</span>: <span class="number">0</span>,</span><br><span class="line">                          <span class="attr">width</span>: <span class="number">250</span>,</span><br><span class="line">                          <span class="attr">height</span>: <span class="number">250</span>,</span><br><span class="line">                          <span class="attr">destWidth</span>: <span class="number">250</span>,</span><br><span class="line">                          <span class="attr">destHeight</span>: <span class="number">250</span>,</span><br><span class="line">                          <span class="attr">canvas</span>: textCanvas, <span class="comment">// 生成的画布对象</span></span><br><span class="line">                          <span class="attr">fileType</span>: <span class="string">&#x27;jpg&#x27;</span>,</span><br><span class="line">                          <span class="attr">quality</span>: <span class="number">1</span>,</span><br><span class="line">                          <span class="title function_">success</span>(<span class="params">tem_res</span>) &#123;</span><br><span class="line">                              <span class="comment">// 保存canvas生成的图片至相册</span></span><br><span class="line">                              wx.<span class="title function_">saveImageToPhotosAlbum</span>(&#123;</span><br><span class="line">                                  <span class="attr">filePath</span>: tem_res.<span class="property">tempFilePath</span>,</span><br><span class="line">                                  <span class="attr">success</span>: <span class="function">(<span class="params">save_res</span>) =&gt;</span> &#123;</span><br><span class="line">                                      wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">                                          <span class="attr">title</span>: <span class="string">&#x27;保存成功&#x27;</span>,</span><br><span class="line">                                          <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">                                      &#125;)</span><br><span class="line">                                  &#125;,</span><br><span class="line">                                  <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">                                      wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">                                          <span class="attr">title</span>: <span class="string">&#x27;保存失败&#x27;</span>,</span><br><span class="line">                                          <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">                                      &#125;)</span><br><span class="line">                                  &#125;,</span><br><span class="line">                              &#125;);</span><br><span class="line">                          &#125;</span><br><span class="line">                      &#125;)</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-map-轨迹回放">4、map-轨迹回放</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br></pre></td><td class="code"><pre><span class="line">// WXML</span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">map</span> <span class="attr">id</span>=<span class="string">&quot;myMap&quot;</span> <span class="attr">class</span>=<span class="string">&quot;map&quot;</span> <span class="attr">show-location</span>=<span class="string">&quot;&#123;&#123;true&#125;&#125;&quot;</span> <span class="attr">latitude</span>=<span class="string">&quot;&#123;&#123;polyline[0].points[0].latitude&#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">longitude</span>=<span class="string">&quot;&#123;&#123;polyline[0].points[0].longitude&#125;&#125;&quot;</span> <span class="attr">markers</span>=<span class="string">&quot;&#123;&#123;markers&#125;&#125;&quot;</span> <span class="attr">polyline</span>=<span class="string">&quot;&#123;&#123;polyline&#125;&#125;&quot;</span> <span class="attr">customCallout</span>=<span class="string">&quot;&#123;&#123;callout&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">slot</span>=<span class="string">&quot;callout&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;markers&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">class</span>=<span class="string">&quot;customCallout&quot;</span> <span class="attr">marker-id</span>=<span class="string">&quot;&#123;&#123;item.id&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">class</span>=<span class="string">&quot;map-text&quot;</span>&gt;</span>自定义气泡框<span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;tool-box&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;time-box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;time-text&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;start&quot;</span>&gt;</span>开始<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;time-text&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;end&quot;</span>&gt;</span>暂停<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// JS</span><br><span class="line">Page(&#123;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 页面的初始数据</span><br><span class="line">   */</span><br><span class="line">  data: &#123;</span><br><span class="line">    latitude: 39.909, // 纬度</span><br><span class="line">    longitude: 116.39742, // 经度</span><br><span class="line">    polyline: [&#123;</span><br><span class="line">      width: 8,</span><br><span class="line">      points: [],</span><br><span class="line">      arrowLine: true,</span><br><span class="line">      color: &#x27;#1296db&#x27;,</span><br><span class="line">    &#125;],</span><br><span class="line">    mapContext: null, //地图对象</span><br><span class="line">    startMove: false, //是否开始回放</span><br><span class="line">    nextPointIndex: 1, //下一个坐标点的索引</span><br><span class="line">    durationTime: 1000, //相邻两点动画持续时长默认1秒</span><br><span class="line">    //标记点(即移动标记物)</span><br><span class="line">    markers: []</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 生命周期函数--监听页面加载</span><br><span class="line">   */</span><br><span class="line">  onLoad(options) &#123;</span><br><span class="line">    var &#123; markers &#125; = this.data</span><br><span class="line">    markers.push(&#123;</span><br><span class="line">      id: 1,</span><br><span class="line">      latitude: 39.909,</span><br><span class="line">      longitude: 116.39742,</span><br><span class="line">      width: 36,</span><br><span class="line">      height: 36,</span><br><span class="line">      // iconPath: &#x27;/static/common/marker.png&#x27;, // 自定义标记点icon</span><br><span class="line">      customCallout: &#123;</span><br><span class="line">        anchorY: -10,</span><br><span class="line">        anchorX: 0,</span><br><span class="line">        display: &quot;ALWAYS&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      markers: markers</span><br><span class="line">    &#125;)</span><br><span class="line">    // 模拟获取轨迹信息</span><br><span class="line">    this.getTrack()</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 开始</span><br><span class="line">  start() &#123;</span><br><span class="line">    this.handleStartMove()</span><br><span class="line">  &#125;,</span><br><span class="line">  // 暂停</span><br><span class="line">  end() &#123;</span><br><span class="line">    this.handleStopMove()</span><br><span class="line">  &#125;,</span><br><span class="line">  // 获取轨迹信息</span><br><span class="line">  getTrack() &#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      polyline: [&#123;</span><br><span class="line">        width: 8,</span><br><span class="line">        points: [&#123;</span><br><span class="line">          latitude: 39.997761,</span><br><span class="line">          longitude: 116.478935</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          latitude: 39.997825,</span><br><span class="line">          longitude: 116.478939</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          latitude: 39.998549,</span><br><span class="line">          longitude: 116.478912</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          latitude: 39.998555,</span><br><span class="line">          longitude: 116.478998</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          latitude: 39.998566,</span><br><span class="line">          longitude: 116.479282</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          latitude: 39.998528,</span><br><span class="line">          longitude: 116.479658</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          latitude: 39.998453,</span><br><span class="line">          longitude: 116.480151</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          latitude: 39.998302,</span><br><span class="line">          longitude: 116.480784</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          latitude: 39.998184,</span><br><span class="line">          longitude: 116.481149</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          latitude: 39.997997,</span><br><span class="line">          longitude: 116.481573</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          latitude: 39.997846,</span><br><span class="line">          longitude: 116.481863</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          latitude: 39.997718,</span><br><span class="line">          longitude: 116.482072</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          latitude: 39.997718,</span><br><span class="line">          longitude: 116.482362</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          latitude: 39.998935,</span><br><span class="line">          longitude: 116.483633</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          latitude: 39.998968,</span><br><span class="line">          longitude: 116.48367</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          latitude: 39.999861,</span><br><span class="line">          longitude: 116.484648</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">        arrowLine: true,</span><br><span class="line">        color: &#x27;#1296db&#x27;,</span><br><span class="line">      &#125;],</span><br><span class="line">    &#125;)</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      durationTime: Math.ceil(3000 / this.data.polyline[0].points.length) //默认播放全程使用10秒，计算相连两点动画时长</span><br><span class="line">    &#125;)</span><br><span class="line">    this.initMapData()</span><br><span class="line">  &#125;,</span><br><span class="line">  //设置地图</span><br><span class="line">  initMapData() &#123;</span><br><span class="line">    this.initMarkers()</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      mapContext: wx.createMapContext(&#x27;myMap&#x27;, this)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  //设置位置（从起点开始）</span><br><span class="line">  initMarkers() &#123;</span><br><span class="line">    var &#123; markers &#125; = this.data</span><br><span class="line">    markers[0].latitude = this.data.polyline[0].points[0].latitude</span><br><span class="line">    markers[0].longitude = this.data.polyline[0].points[0].longitude</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      markers:markers</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  //开始移动</span><br><span class="line">  handleStartMove() &#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      startMove:true</span><br><span class="line">    &#125;)</span><br><span class="line">    this.movePoint()</span><br><span class="line">  &#125;,</span><br><span class="line">  //停止移动</span><br><span class="line">  handleStopMove() &#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      startMove:false</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  // 移动坐标</span><br><span class="line">  movePoint() &#123;</span><br><span class="line">    /*</span><br><span class="line">      //也可以用这个方法</span><br><span class="line">      this.mapContext.moveAlong(&#123;</span><br><span class="line">        duration: 30000,</span><br><span class="line">        markerId: this.markers[0].id,</span><br><span class="line">        path: this.polyline[0].points</span><br><span class="line">      &#125;)</span><br><span class="line">      return</span><br><span class="line">    */</span><br><span class="line">   var that = this</span><br><span class="line">   var &#123; mapContext &#125; = this.data</span><br><span class="line">   mapContext.translateMarker(&#123;</span><br><span class="line">      duration: that.data.durationTime,</span><br><span class="line">      markerId: that.data.markers[0].id,</span><br><span class="line">      destination: &#123;</span><br><span class="line">        latitude: that.data.polyline[0].points[that.data.nextPointIndex].latitude,</span><br><span class="line">        longitude: that.data.polyline[0].points[that.data.nextPointIndex].longitude</span><br><span class="line">      &#125;,</span><br><span class="line">      animationEnd: res =&gt; &#123;</span><br><span class="line">        //播放结束，继续移动到下一个点，最后一个点时结束移动</span><br><span class="line">        if (that.data.nextPointIndex &lt; that.data.polyline[0].points.length - 1) &#123;</span><br><span class="line">          that.data.nextPointIndex++</span><br><span class="line">          if (that.data.startMove) &#123;</span><br><span class="line">            that.movePoint()</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          that.setData(&#123;</span><br><span class="line">            nextPointIndex:1,</span><br><span class="line">            startMove:false,</span><br><span class="line">            is_play:false</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      mapContext:mapContext</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 生命周期函数--监听页面初次渲染完成</span><br><span class="line">   */</span><br><span class="line">  onReady() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 生命周期函数--监听页面显示</span><br><span class="line">   */</span><br><span class="line">  onShow() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 生命周期函数--监听页面隐藏</span><br><span class="line">   */</span><br><span class="line">  onHide() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 生命周期函数--监听页面卸载</span><br><span class="line">   */</span><br><span class="line">  onUnload() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 页面相关事件处理函数--监听用户下拉动作</span><br><span class="line">   */</span><br><span class="line">  onPullDownRefresh() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 页面上拉触底事件的处理函数</span><br><span class="line">   */</span><br><span class="line">  onReachBottom() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 用户点击右上角分享</span><br><span class="line">   */</span><br><span class="line">  onShareAppMessage() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">                                                                          </span><br><span class="line">// WXSS</span><br><span class="line">.map &#123;</span><br><span class="line">  width: 100vw;</span><br><span class="line">  height: 100vh;</span><br><span class="line">&#125;</span><br><span class="line">.content &#123;</span><br><span class="line">  padding: 20rpx;</span><br><span class="line">  background-color: #ffffff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.box &#123;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  position: fixed;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  left: 0;</span><br><span class="line">  z-index: 9;</span><br><span class="line">  padding: 30rpx 30rpx 50rpx;</span><br><span class="line">  width: 100%;</span><br><span class="line">  background-color: #ffffff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.tool-box &#123;</span><br><span class="line">  margin-bottom: 30rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.time-box &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  align-items: center;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.time-text &#123;</span><br><span class="line">  flex: 1;</span><br><span class="line">  border-radius: 20rpx;</span><br><span class="line">  padding: 20rpx 15rpx;</span><br><span class="line">  margin: 0 20rpx;</span><br><span class="line">  text-align: center;</span><br><span class="line">  font-size: 28rpx;</span><br><span class="line">  background-color: #dddddd;</span><br><span class="line">  color: #777777;</span><br><span class="line">&#125;                                                                   </span><br></pre></td></tr></table></figure><hr><h3 id="elementui组件">elementUI组件</h3><h4 id="1-select组件-远程搜索多选模式的使用">1、select组件-远程搜索多选模式的使用</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;el-dialog :title=&quot;title&quot; :visible.sync=&quot;dialogVisible&quot; width=&quot;50%&quot;&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h3&gt;提示：情输入户主或家庭成员的身份证/姓名搜索家庭信息&lt;/h3&gt;</span><br><span class="line">        &lt;div class=&quot;radio-box&quot;&gt;</span><br><span class="line">          &lt;el-radio v-model=&quot;type&quot; :label=&quot;1&quot;&gt;根据姓名搜索&lt;/el-radio&gt;</span><br><span class="line">          &lt;el-radio v-model=&quot;type&quot; :label=&quot;2&quot;&gt;根据身份证搜索&lt;/el-radio&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;el-select</span><br><span class="line">            ref=&quot;multiSelect&quot; </span><br><span class="line">            style=&quot;width: 100%&quot;</span><br><span class="line">            v-model=&quot;value&quot;</span><br><span class="line">            multiple</span><br><span class="line">            :multiple-limit=&quot;1&quot;</span><br><span class="line">            filterable</span><br><span class="line">            remote</span><br><span class="line">            reserve-keyword</span><br><span class="line">            :placeholder=&quot;placeholder_text&quot;</span><br><span class="line">            :remote-method=&quot;remoteMethod&quot;</span><br><span class="line">            :loading=&quot;loading&quot;</span><br><span class="line">            @change=&quot;change&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for=&quot;(item, index) in options&quot;</span><br><span class="line">              :key=&quot;item.value&quot;</span><br><span class="line">              :label=&quot;item.label&quot;</span><br><span class="line">              :value=&quot;index&quot;</span><br><span class="line">            &gt;</span><br><span class="line">            &lt;/el-option&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;dialogVisible = false&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type=&quot;primary&quot; @click=&quot;confirm&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">    &lt;/el-dialog&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; get_id_card_info, get_familys &#125; from &quot;@/api/business/person&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      dialogVisible: false,</span><br><span class="line">      type: 1, // 搜索类型：1为按姓名搜索，2为按身份证搜索</span><br><span class="line">      title: &quot;&quot;,</span><br><span class="line"></span><br><span class="line">      form: &#123;</span><br><span class="line">        name: &quot;&quot;, // 按姓名搜索</span><br><span class="line">        id_card: &quot;&quot;, // 按身份证搜索</span><br><span class="line">      &#125;,</span><br><span class="line">      placeholder_text: &quot;请输入姓名进行搜索&quot;,</span><br><span class="line">      loading: false,</span><br><span class="line">      value: &quot;&quot;, // 下拉选择器绑定的值</span><br><span class="line">      options: [], // 搜索回来的数据</span><br><span class="line"></span><br><span class="line">      select_value: null, // 选中的值</span><br><span class="line"></span><br><span class="line">      is_have_file: false,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    // 监听搜索类型</span><br><span class="line">    type(newV, oldV) &#123;</span><br><span class="line">      this.options = [];</span><br><span class="line">      if (newV == 1) &#123;</span><br><span class="line">        this.placeholder_text = &quot;请输入姓名进行搜索&quot;;</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        this.placeholder_text = &quot;请输入身份证进行搜索&quot;;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    blur(e)&#123;</span><br><span class="line">      console.log(e,&#x27;-----------------使input失去焦点，并隐藏下拉框--------------&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    // 远程搜索方法</span><br><span class="line">    remoteMethod(query) &#123;</span><br><span class="line">      if (!query) &#123;</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      if (this.type == 1) &#123;</span><br><span class="line">        this.form.name = query;</span><br><span class="line">        this.form.id_card = &quot;&quot;;</span><br><span class="line">      &#125; else if (this.type == 2) &#123;</span><br><span class="line">        this.form.name = &quot;&quot;;</span><br><span class="line">        this.form.id_card = query;</span><br><span class="line">      &#125;</span><br><span class="line">      get_id_card_info(this.form).then((res) =&gt; &#123;</span><br><span class="line">        this.value = &quot;&quot;;</span><br><span class="line">        this.options = [];</span><br><span class="line">        if (res.success) &#123;</span><br><span class="line">          res.content.forEach((item) =&gt; &#123;</span><br><span class="line">            item.label =</span><br><span class="line">              item.name +</span><br><span class="line">              &quot; (身份证：&quot; +</span><br><span class="line">              item.id_card +</span><br><span class="line">              &quot;) (家庭编号：&quot; +</span><br><span class="line">              (item.family_number ? item.family_number : &quot;无&quot;) +</span><br><span class="line">              &quot;)&quot;;</span><br><span class="line">            this.options.push(item);</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    // 选中</span><br><span class="line">    change(e) &#123;</span><br><span class="line">      if (e.lenght != 0) &#123;</span><br><span class="line">        this.select_value = this.options[e[0]];</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        this.select_value = null;</span><br><span class="line">      &#125;</span><br><span class="line">      // 选择之后关闭下拉框(需要设置定时器使用，直接调用不起作用)</span><br><span class="line">      setTimeout(()=&gt;&#123;</span><br><span class="line">        this.$refs.multiSelect.blur()</span><br><span class="line">      &#125;,500)</span><br><span class="line">    &#125;,</span><br><span class="line">    // 确定</span><br><span class="line">    confirm() &#123;</span><br><span class="line">      // 判断是否选择了家庭信息</span><br><span class="line">      if (!this.select_value) &#123;</span><br><span class="line">        this.$message(&#123;</span><br><span class="line">          message: &quot;请选择家庭信息&quot;,</span><br><span class="line">          type: &quot;warning&quot;,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        // 判断是否需要判断有无家庭编号</span><br><span class="line">        if (!this.is_have_file) &#123;</span><br><span class="line">          // 判断是否有家庭编号</span><br><span class="line">          if (!this.select_value.family_number) &#123;</span><br><span class="line">            this.$message(&#123;</span><br><span class="line">              message: &quot;该家庭成员未加入家庭&quot;,</span><br><span class="line">              type: &quot;warning&quot;,</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            // 根据家庭编号获取整个家庭成员信息</span><br><span class="line">            get_familys(&#123;</span><br><span class="line">              familyNumber: this.select_value.family_number,</span><br><span class="line">            &#125;).then((res) =&gt; &#123;</span><br><span class="line">              if (res.success) &#123;</span><br><span class="line">                this.$emit(</span><br><span class="line">                  &quot;success&quot;,</span><br><span class="line">                  res.content,</span><br><span class="line">                  this.select_value.family_number</span><br><span class="line">                );</span><br><span class="line">                this.dialogVisible = false;</span><br><span class="line">              &#125; else &#123;</span><br><span class="line">                this.$message(&#123;</span><br><span class="line">                  message: res.errString,</span><br><span class="line">                  type: &quot;error&quot;,</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          // 不需要判断有家庭编号</span><br><span class="line">          // console.log(this.select_value, &quot;-----------选择的项------------&quot;);</span><br><span class="line">          this.$emit(</span><br><span class="line">            &quot;success&quot;,</span><br><span class="line">            this.select_value,</span><br><span class="line">            this.select_value.family_number</span><br><span class="line">          );</span><br><span class="line">          this.dialogVisible = false;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">::v-deep .el-dialog &#123;</span><br><span class="line">  background-color: #31324e !important;</span><br><span class="line">  color: #ffffff;</span><br><span class="line"></span><br><span class="line">  .el-dialog__title &#123;</span><br><span class="line">    color: #ffffff;</span><br><span class="line">  &#125;</span><br><span class="line">  .el-dialog__footer &#123;</span><br><span class="line">    text-align: center;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">::v-deep input.el-input__inner &#123;</span><br><span class="line">  color: #000000 !important;</span><br><span class="line">&#125;</span><br><span class="line">::v-deep textarea.el-textarea__inner &#123;</span><br><span class="line">  color: #000000 !important;</span><br><span class="line">&#125;</span><br><span class="line">h3 &#123;</span><br><span class="line">  border-bottom: 1px solid #ffffff;</span><br><span class="line">  padding-bottom: 20px;</span><br><span class="line">  color: #ffffff;</span><br><span class="line">&#125;</span><br><span class="line">.radio-box &#123;</span><br><span class="line">  padding: 20px 0;</span><br><span class="line">&#125;</span><br><span class="line">::v-deep input.el-input__inner &#123;</span><br><span class="line">  border: none !important;</span><br><span class="line">  background-color: #1b1c30;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2-upload组件-上传图片-视频-文件">2、upload组件-<strong>上传图片/视频/文件</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--附件(文件/照片/视频) --&gt;</span><br><span class="line">&lt;el-form-item label=&quot;&quot;&gt;</span><br><span class="line">  &lt;div slot=&quot;label&quot; style=&quot;color: #999999&quot;&gt;</span><br><span class="line">    附件(文件/照片/视频)</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;!-- 文件 --&gt;</span><br><span class="line">  &lt;div</span><br><span class="line">    style=&quot;padding: 10px; color: #ffffff; display: flex&quot;</span><br><span class="line">    v-if=&quot;files_list.length != 0&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;div style=&quot;margin-right: 20px&quot;&gt;已上传的文件：&lt;/div&gt;</span><br><span class="line">    &lt;div style=&quot;flex: 1&quot;&gt;</span><br><span class="line">      &lt;div</span><br><span class="line">        v-for=&quot;(fileItem, fileIndex) in files_list&quot;</span><br><span class="line">        :key=&quot;fileIndex&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;a</span><br><span class="line">          :href=&quot;baseUrl + fileItem.url&quot;</span><br><span class="line">          target=&quot;blank&quot;</span><br><span class="line">          style=&quot;margin-right: 15px&quot;</span><br><span class="line">          &gt;&#123;&#123; fileItem.name &#125;&#125;&lt;/a</span><br><span class="line">        &gt;&lt;i</span><br><span class="line">          class=&quot;el-icon-delete&quot;</span><br><span class="line">          style=&quot;color: red; cursor: pointer&quot;</span><br><span class="line">          @click=&quot;del_files(fileIndex)&quot;</span><br><span class="line">        &gt;&lt;/i&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;!-- 视频 --&gt;</span><br><span class="line">  &lt;div style=&quot;margin-bottom: 10px&quot; v-if=&quot;video_list.length != 0&quot;&gt;</span><br><span class="line">    &lt;div</span><br><span class="line">      v-for=&quot;(videoitem, videoindex) in video_list&quot;</span><br><span class="line">      :key=&quot;videoindex&quot;</span><br><span class="line">      style=&quot;</span><br><span class="line">        position: relative;</span><br><span class="line">        display: inline-block;</span><br><span class="line">        width: 146px;</span><br><span class="line">        height: 146px;</span><br><span class="line">        margin-right: 10px;</span><br><span class="line">      &quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;video</span><br><span class="line">        :autoplay=&quot;false&quot;</span><br><span class="line">        controls</span><br><span class="line">        :src=&quot;baseUrl + videoitem&quot;</span><br><span class="line">        style=&quot;width: 100%; height: 100%&quot;</span><br><span class="line">      &gt;&lt;/video&gt;</span><br><span class="line">      &lt;img</span><br><span class="line">        src=&quot;../../assets/new/delete.png&quot;</span><br><span class="line">        alt=&quot;&quot;</span><br><span class="line">        style=&quot;</span><br><span class="line">          position: absolute;</span><br><span class="line">          right: 0;</span><br><span class="line">          top: 0;</span><br><span class="line">          z-index: 999999999;</span><br><span class="line">          width: 32px;</span><br><span class="line">          cursor: pointer;</span><br><span class="line">        &quot;</span><br><span class="line">        @click=&quot;del_video(videoindex)&quot;</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;!-- 图片 --&gt;</span><br><span class="line">  &lt;el-upload</span><br><span class="line">    ref=&quot;upload&quot;</span><br><span class="line">    action=&quot;#&quot;</span><br><span class="line">    list-type=&quot;picture-card&quot;</span><br><span class="line">    :show-file-list=&quot;true&quot;</span><br><span class="line">    :file-list=&quot;photo_list&quot;</span><br><span class="line">    :auto-upload=&quot;false&quot;</span><br><span class="line">    :before-upload=&quot;before_upload&quot;</span><br><span class="line">    :on-change=&quot;on_change&quot;</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;i slot=&quot;default&quot; class=&quot;el-icon-plus&quot;&gt;&lt;/i&gt;</span><br><span class="line">    &lt;div slot=&quot;file&quot; slot-scope=&quot;&#123; file &#125;&quot;&gt;</span><br><span class="line">      &lt;img</span><br><span class="line">        class=&quot;el-upload-list__item-thumbnail&quot;</span><br><span class="line">        :src=&quot;file.url&quot;</span><br><span class="line">        alt=&quot;&quot;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;span class=&quot;el-upload-list__item-actions&quot;&gt;</span><br><span class="line">        &lt;span</span><br><span class="line">          class=&quot;el-upload-list__item-preview&quot;</span><br><span class="line">          @click=&quot;handlePictureCardPreview(file)&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;i class=&quot;el-icon-zoom-in&quot;&gt;&lt;/i&gt;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">        &lt;span</span><br><span class="line">          class=&quot;el-upload-list__item-delete&quot;</span><br><span class="line">          @click=&quot;handleRemove(file)&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;i class=&quot;el-icon-delete&quot;&gt;&lt;/i&gt;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/el-upload&gt;</span><br><span class="line">  &lt;el-dialog :visible.sync=&quot;dialogVisible&quot;&gt;</span><br><span class="line">    &lt;img width=&quot;100%&quot; :src=&quot;dialogImageUrl&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br><span class="line">&lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">      data()&#123;</span><br><span class="line">        return&#123;</span><br><span class="line">          // 上传附件</span><br><span class="line">          baseUrl: &quot;https://zhbf.flyinggnss.net&quot;, // 图片基地址</span><br><span class="line">          files_list: [], // 附件-文件(pdf/txt/zip/docx/doc/xlsx/xls)</span><br><span class="line">          video_list: [], // 附件-视频</span><br><span class="line">          photo_list: [], // 附件-图片-upload组件绑定</span><br><span class="line">          photo_list_submit: [], // 附件-图片-请求时使用</span><br><span class="line">          dialogVisible: false, // 附件-图片-预览弹出框显示与隐藏</span><br><span class="line">          dialogImageUrl: &quot;&quot;, // 附件-图片-当前预览图片的url地址</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods:&#123;</span><br><span class="line">        // 附件上传(文件/图片/视频)</span><br><span class="line">        before_upload(file) &#123;</span><br><span class="line">          // 判断上传的是视频还是图片还是文件</span><br><span class="line">          if (</span><br><span class="line">            [&quot;image/png&quot;, &quot;image/jpeg&quot;].indexOf(file.type) === -1 &amp;&amp;</span><br><span class="line">            [</span><br><span class="line">              &quot;video/mp4&quot;,</span><br><span class="line">              // &quot;video/ogg&quot;,</span><br><span class="line">              // &quot;video/flv&quot;,</span><br><span class="line">              // &quot;video/avi&quot;,</span><br><span class="line">              // &quot;video/wmv&quot;,</span><br><span class="line">              // &quot;video/rmvb&quot;,</span><br><span class="line">              // &quot;video/mov&quot;,</span><br><span class="line">            ].indexOf(file.type) === -1 &amp;&amp;</span><br><span class="line">            [</span><br><span class="line">              &quot;application/pdf&quot;, // pdf</span><br><span class="line">              &quot;text/plain&quot;, // txt</span><br><span class="line">              &quot;application/vnd.openxmlformats-officedocument.wordprocessingml.document&quot;, // docx</span><br><span class="line">              &quot;application/msword&quot;, // doc</span><br><span class="line">              &quot;application/x-zip-compressed&quot;, // zip</span><br><span class="line">              &quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;, // xlsx</span><br><span class="line">              &quot;application/vnd.ms-excel&quot;, // xls</span><br><span class="line">            ].indexOf(file.type) === -1</span><br><span class="line">          ) &#123;</span><br><span class="line">            this.$message(&#123;</span><br><span class="line">              type: &quot;warning&quot;,</span><br><span class="line">              message:</span><br><span class="line">                &quot;仅支持上传jpg格式图片，mp4格式视频，pdf/txt/docx/doc/zip/xlsx/xls文件&quot;,</span><br><span class="line">            &#125;);</span><br><span class="line">            return;</span><br><span class="line">          &#125;</span><br><span class="line">          upload(&#123;</span><br><span class="line">            files: file,</span><br><span class="line">          &#125;).then((res) =&gt; &#123;</span><br><span class="line">            if (res.success) &#123;</span><br><span class="line">              if (res.content.indexOf(&quot;.mp4&quot;) != -1) &#123;</span><br><span class="line">                // 添加的视频</span><br><span class="line">                this.video_list.push(res.content);</span><br><span class="line">              &#125; else if (</span><br><span class="line">                res.content.indexOf(&quot;.png&quot;) != -1 ||</span><br><span class="line">                res.content.indexOf(&quot;.jpg&quot;) != -1</span><br><span class="line">              ) &#123;</span><br><span class="line">                // 添加的图片</span><br><span class="line">                this.photo_list.push(&#123;</span><br><span class="line">                  index: this.photo_list.length,</span><br><span class="line">                  name: file.name,</span><br><span class="line">                  url: this.baseUrl + res.content,</span><br><span class="line">                &#125;);</span><br><span class="line">                this.photo_list_submit.push(res.content);</span><br><span class="line">              &#125; else &#123;</span><br><span class="line">                // 添加的文件(pdf/txt/docx/doc/zip/xlsx/xls)</span><br><span class="line">                this.files_list.push(&#123;</span><br><span class="line">                  url: res.content,</span><br><span class="line">                  name: file.name,</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">              this.$message(&#123;</span><br><span class="line">                type: &quot;error&quot;,</span><br><span class="line">                message: res.errString,</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">          return false;</span><br><span class="line">        &#125;,</span><br><span class="line">        on_change(file, fileList) &#123;</span><br><span class="line">          // 上传组件选择文件时</span><br><span class="line">          this.$refs.upload.submit();</span><br><span class="line">        &#125;,</span><br><span class="line">        handleRemove(file) &#123;</span><br><span class="line">          // 移除图片</span><br><span class="line">          this.photo_list.forEach((item, index) =&gt; &#123;</span><br><span class="line">            if (item.index == file.index) &#123;</span><br><span class="line">              this.photo_list_submit.splice(index, 1);</span><br><span class="line">              this.photo_list.splice(index, 1);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        handlePictureCardPreview(file) &#123;</span><br><span class="line">          // 预览图片</span><br><span class="line">          this.dialogImageUrl = file.url;</span><br><span class="line">          this.dialogVisible = true;</span><br><span class="line">        &#125;,</span><br><span class="line">        // 附件-移除视频</span><br><span class="line">        del_video(index) &#123;</span><br><span class="line">          this.video_list.splice(index, 1);</span><br><span class="line">        &#125;,</span><br><span class="line">        // 附件-移除文件</span><br><span class="line">        del_files(index) &#123;</span><br><span class="line">          this.files_list.splice(index, 1);</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【uniapp】微信小程序授权获取用户信息</title>
      <link href="/2022/12/19/%E3%80%90uniapp%E3%80%91%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%88%E6%9D%83%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF/"/>
      <url>/2022/12/19/%E3%80%90uniapp%E3%80%91%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%88%E6%9D%83%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<h3 id="👉准备工作">👉准备工作</h3>]]></content>
      
      
      <categories>
          
          <category> uniapp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uniapp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【Vue2】高德地图(vue-amap与JSAPI)</title>
      <link href="/2022/12/18/%E3%80%90Vue2%E3%80%91%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE(vue-amap%E4%B8%8EJSAPI)/"/>
      <url>/2022/12/18/%E3%80%90Vue2%E3%80%91%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE(vue-amap%E4%B8%8EJSAPI)/</url>
      
        <content type="html"><![CDATA[<h3 id="👉准备工作">👉准备工作</h3><h4 id="注册并登录高德地图开放平台-高德地图开放平台"><strong>注册并登录高德地图开放平台（<a href="https://lbs.amap.com/">高德地图开放平台</a>）</strong></h4><p>注册登录之后点击控制台</p><p><img src="https://ocean-resources.oss-cn-shenzhen.aliyuncs.com/blog/Vue/%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE/amap_1.png" alt=""></p><p>应用管理-我的应用-创建新应用</p><p><img src="https://ocean-resources.oss-cn-shenzhen.aliyuncs.com/blog/Vue/%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE/amap_2.png" alt=""></p><p>在创建的新应用中添加新的key</p><p><img src="https://ocean-resources.oss-cn-shenzhen.aliyuncs.com/blog/Vue/%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE/amap_3.png" alt=""></p><p>查看创建的key和安全密钥</p><p><img src="https://ocean-resources.oss-cn-shenzhen.aliyuncs.com/blog/Vue/%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE/amap_4.png" alt=""></p><hr><h3 id="👉vue-amap">👉vue-amap</h3><h4 id="关于vue-amap">关于vue-amap</h4><ul><li>vue-amap是基于Vue2.x与高德的地图组件</li><li>数据状态与地图状态单向绑定，开发者无需关心地图的具体操作</li></ul><h4 id="了解vue-amap">了解vue-amap</h4><ul><li><a href="https://github.com/ElemeFE/vue-amap/">GitHub</a></li><li><a href="https://elemefe.github.io/vue-amap/#/zh-cn/introduction/install">开发文档</a></li><li><a href="https://www.wenjiangs.com/doc/mdxkhhtr">示例教程</a></li></ul><h4 id="安装vue-amap"><strong>安装vue-amap</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-amap --save</span><br></pre></td></tr></table></figure><h4 id="引入vue-amap"><strong>引入vue-amap</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入方式一：一般的项目对于 vue-amap 的初始化 只需要调用 initAmapApiLoader 方法即可</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueAMap</span> <span class="keyword">from</span> <span class="string">&#x27;vue-amap&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 高德地图-设置安全密钥</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">_AMapSecurityConfig</span> = &#123;</span><br><span class="line">  <span class="attr">securityJsCode</span>: <span class="string">&quot;申请的高德地图应用的安全密钥&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueAMap</span>);</span><br><span class="line"><span class="title class_">VueAMap</span>.<span class="title function_">initAMapApiLoader</span>(&#123;</span><br><span class="line">  <span class="attr">key</span>: <span class="string">&#x27;申请的高德地图应用的key&#x27;</span>,</span><br><span class="line">  <span class="attr">plugin</span>: [<span class="string">&#x27;AMap.Autocomplete&#x27;</span>, <span class="string">&#x27;AMap.PlaceSearch&#x27;</span>, <span class="string">&#x27;AMap.Scale&#x27;</span>, <span class="string">&#x27;AMap.OverView&#x27;</span>, <span class="string">&#x27;AMap.ToolBar&#x27;</span>, <span class="string">&#x27;AMap.MapType&#x27;</span>,        <span class="string">&#x27;AMap.PolyEditor&#x27;</span>, <span class="string">&#x27;AMap.CircleEditor&#x27;</span>],</span><br><span class="line">  <span class="comment">// 默认高德 sdk 版本为 1.4.4</span></span><br><span class="line">  <span class="attr">v</span>: <span class="string">&#x27;1.4.4&#x27;</span>,</span><br><span class="line">  <span class="comment">// uiVersion: &#x27;1.0.11&#x27; // 版本号(引入高德 UI 组件库)</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入方式二：在定制化程度高德的项目中，如果你只想通过 vue-amap 引入高德地图，而部分实例化的操作直接使用高德地图的sdk，此时需要使用 lazyAMapApiLoaderInstance</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueAMap</span> <span class="keyword">from</span> <span class="string">&#x27;vue-amap&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; lazyAMapApiLoaderInstance &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-amap&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 高德地图-设置安全密钥</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">_AMapSecurityConfig</span> = &#123;</span><br><span class="line">  <span class="attr">securityJsCode</span>: <span class="string">&quot;申请的高德地图应用的安全密钥&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueAMap</span>);</span><br><span class="line"><span class="title class_">VueAMap</span>.<span class="title function_">initAMapApiLoader</span>(&#123;</span><br><span class="line">  <span class="attr">key</span>: <span class="string">&#x27;申请的高德地图应用的key&#x27;</span>,</span><br><span class="line">  <span class="attr">plugin</span>: [<span class="string">&#x27;AMap.Autocomplete&#x27;</span>, <span class="string">&#x27;AMap.PlaceSearch&#x27;</span>, <span class="string">&#x27;AMap.Scale&#x27;</span>, <span class="string">&#x27;AMap.OverView&#x27;</span>, <span class="string">&#x27;AMap.ToolBar&#x27;</span>, <span class="string">&#x27;AMap.MapType&#x27;</span>, <span class="string">&#x27;AMap.PolyEditor&#x27;</span>, <span class="string">&#x27;AMap.CircleEditor&#x27;</span>],</span><br><span class="line">  <span class="comment">// 默认高德 sdk 版本为 1.4.4</span></span><br><span class="line">  <span class="attr">v</span>: <span class="string">&#x27;1.4.4&#x27;</span>,</span><br><span class="line">  <span class="comment">// uiVersion: &#x27;1.0.11&#x27; // 版本号(引入高德 UI 组件库)</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">lazyAMapApiLoaderInstance.<span class="title function_">load</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// your code ...</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">map</span> = <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Map</span>(<span class="string">&#x27;amapContainer&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">center</span>: <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">LngLat</span>(<span class="number">121.59996</span>, <span class="number">31.197646</span>)</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="兼容高德原生sdk">兼容高德原生SDK</h4><ul><li><p><code>vue-amap</code> 能够抛开并覆盖高德原生SDK的大多数场景，但是对于部分定制化程度高的场景，可能还是需要引入高德原生SDK来支持</p></li><li><p>对于大多数 <code>vue-amap</code> 组件，都有 <code>init</code> 这个 <code>event</code>，参数为高德的实例，通过这样暴露高德实例的方式，我们可以非常自由地将原生 SDK 和 vue-amap 结合起来使用</p></li><li><p>若涉及到高德原生 <code>AMap</code> 需要注意的点</p><ul><li>确保 <code>vue-amap</code> 的导入名不是 <code>AMap</code>，推荐 <code>import VueAMap from 'vue-amap'</code> 避免和高德全局的 <code>AMap</code> 冲突</li><li>若 <code>eslint</code> 报错 <code>AMap is undefined</code> 之类的错误。请将 <code>AMap</code> 配置到 <code>.eslintrc</code> 的 <code>globals</code> 中</li></ul></li><li><p>下面以 <code>el-amap</code> 组件举例。<code>el-amap</code> 比较特殊，它同时还支持一个 <code>amap-manager</code> 属性，通过这个属性，可以在任何地方拿到高德原生 <code>AMap.Map</code> 实例</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;amap-wrapper&quot;&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button @click=&quot;add()&quot;&gt;add marker&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;el-amap</span><br><span class="line">      vid=&quot;amap&quot;</span><br><span class="line">      :center=&quot;center&quot;</span><br><span class="line">      :zoom=&quot;zoom&quot;</span><br><span class="line">      :amap-manager=&quot;amapManager&quot;</span><br><span class="line">      :events=&quot;events&quot;</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;/el-amap&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// NPM 方式</span><br><span class="line">import &#123; AMapManager &#125; from &quot;vue-amap&quot;;</span><br><span class="line">let amapManager = new AMapManager();</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      amapManager,</span><br><span class="line">      zoom: 12,</span><br><span class="line">      center: [121.59996, 31.197646],</span><br><span class="line">      events: &#123;</span><br><span class="line">        init(o) &#123;</span><br><span class="line">          let marker = new AMap.Marker(&#123;</span><br><span class="line">            position: [121.59996, 31.197646],</span><br><span class="line">          &#125;);</span><br><span class="line">          marker.setMap(o);</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    add() &#123;</span><br><span class="line">      let o = amapManager.getMap();</span><br><span class="line">      let marker = new AMap.Marker(&#123;</span><br><span class="line">        position: [121.59996, 31.177646],</span><br><span class="line">      &#125;);</span><br><span class="line">      marker.setMap(o);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.amap-wrapper &#123;</span><br><span class="line">  /* width: 100vw; */</span><br><span class="line">  height: 100vh;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li></ul><h4 id="使用vue-amap"><strong>使用vue-amap</strong></h4><ul><li><h5 id="map">map</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;amap-wrapper&quot;&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">  vid：地图容器节点的ID</span><br><span class="line">      events：绑定事件</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;el-amap</span><br><span class="line">      ref=&quot;amap&quot;</span><br><span class="line">      vid=&quot;amap&quot;</span><br><span class="line">      :events=&quot;amapEvents&quot;</span><br><span class="line">      :zoom=&quot;zoom&quot;</span><br><span class="line">      :zooms=&quot;zooms&quot;</span><br><span class="line">      :center=&quot;center&quot;</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;/el-amap&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 地图实例</span><br><span class="line">      amap: null,</span><br><span class="line">      // 地图实例事件</span><br><span class="line">      amapEvents: &#123;</span><br><span class="line">        // 地图图块加载完成后触发</span><br><span class="line">        complete: () =&gt; &#123;</span><br><span class="line">          _this.amap = _this.$refs.amap.$$getInstance(); // _this.$refs.amap.$$getInstance() 用于获取当前地图实例对象</span><br><span class="line">          console.log(_this.amap, &quot;---当前地图实例---&quot;);</span><br><span class="line">          _this.amap.setFitView() // 将地图调整到合适的缩放等级和中心点</span><br><span class="line">        &#125;,</span><br><span class="line">        init(map) &#123;</span><br><span class="line">          // console.log(map,&#x27;---地图实例对象---&#x27;)</span><br><span class="line">          map.setMapStyle(&quot;amap://styles/macaron&quot;); // 自定义高德地图的样式</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      // 地图初始化视图的缩放级别</span><br><span class="line">      zoom: 13,</span><br><span class="line">      // 地图显示的可缩放级别范围</span><br><span class="line">      zooms: [3, 18],</span><br><span class="line">      // 地图初始化视图中心点</span><br><span class="line">      center: [116.481485, 39.990464],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.amap-wrapper &#123;</span><br><span class="line">  width: 100vw;</span><br><span class="line">  height: 100vh;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li><li><h5 id="点坐标">点坐标</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;amap-wrapper&quot;&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">  vid：地图容器节点的ID</span><br><span class="line">      events：绑定事件</span><br><span class="line">      extData：自定义属性</span><br><span class="line">      icon：点标记中显示的图标(可以是本地图标)</span><br><span class="line">      isCustom：是否自定义信息窗口</span><br><span class="line">      --&gt;</span><br><span class="line">    &lt;el-amap</span><br><span class="line">      ref=&quot;amap&quot;</span><br><span class="line">      vid=&quot;amap&quot;</span><br><span class="line">      :events=&quot;amapEvents&quot;</span><br><span class="line">      :zoom=&quot;zoom&quot;</span><br><span class="line">      :zooms=&quot;zooms&quot;</span><br><span class="line">      :center=&quot;center&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;!-- 点标记 --&gt;</span><br><span class="line">      &lt;el-amap-marker</span><br><span class="line">        vid=&quot;amap-marker&quot;</span><br><span class="line">        v-for=&quot;marker in markers&quot;</span><br><span class="line">        :position=&quot;marker.position&quot;</span><br><span class="line">        :key=&quot;marker.id&quot;</span><br><span class="line">        :icon=&quot;marker.icon&quot;</span><br><span class="line">        :extData=&quot;marker&quot;</span><br><span class="line">        :events=&quot;marker.events&quot;</span><br><span class="line">      &gt;&lt;/el-amap-marker&gt;</span><br><span class="line">      &lt;!-- 信息窗口 --&gt;</span><br><span class="line">      &lt;el-amap-info-window</span><br><span class="line">        vid=&quot;amap-window&quot;</span><br><span class="line">        v-for=&quot;window in windows&quot;</span><br><span class="line">        :key=&quot;window.id&quot;</span><br><span class="line">        :position=&quot;window.position&quot;</span><br><span class="line">        :content=&quot;window.content&quot;</span><br><span class="line">        :offset=&quot;window.offset&quot;</span><br><span class="line">        :visible=&quot;window.visible&quot;</span><br><span class="line">        :isCustom=&quot;false&quot;</span><br><span class="line">      &gt;&lt;/el-amap-info-window&gt;</span><br><span class="line">    &lt;/el-amap&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 地图实例</span><br><span class="line">      amap: null,</span><br><span class="line">      // 地图实例事件</span><br><span class="line">      amapEvents: &#123;</span><br><span class="line">        // 地图图块加载完成后触发</span><br><span class="line">        complete: () =&gt; &#123;</span><br><span class="line">          _this.amap = _this.$refs.amap.$$getInstance(); // _this.$refs.amap.$$getInstance() 用于获取当前地图实例对象</span><br><span class="line">          console.log(_this.amap, &quot;---当前地图实例---&quot;);</span><br><span class="line">          _this.amap.setFitView(); // 将地图调整到合适的缩放等级和中心点</span><br><span class="line">        &#125;,</span><br><span class="line">        init(map) &#123;</span><br><span class="line">          // console.log(map,&#x27;---地图实例对象---&#x27;)</span><br><span class="line">          _this.amap = map.setMapStyle(&quot;amap://styles/macaron&quot;); // 自定义高德地图的样式</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      // 地图初始化视图的缩放级别</span><br><span class="line">      zoom: 13,</span><br><span class="line">      // 地图显示的可缩放级别范围</span><br><span class="line">      zooms: [3, 18],</span><br><span class="line">      // 地图初始化视图中心点</span><br><span class="line">      center: [116.481485, 39.990464],</span><br><span class="line">      // 点标记数组</span><br><span class="line">      markers: [</span><br><span class="line">        &#123;</span><br><span class="line">          id: 1,</span><br><span class="line">          position: [116.481485, 39.990464],</span><br><span class="line">          icon: &quot;http://218.29.14.102:18080/webenv/images/mark_b.png&quot;,</span><br><span class="line">          events: &#123;</span><br><span class="line">            click(e) &#123;</span><br><span class="line">              _this.markerClick(e);</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          id: 2,</span><br><span class="line">          position: [116.484485, 39.993464],</span><br><span class="line">          icon: &quot;http://218.29.14.102:18080/webenv/images/mark_b.png&quot;,</span><br><span class="line">          events: &#123;</span><br><span class="line">            click(e) &#123;</span><br><span class="line">              _this.markerClick(e);</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">      // 信息窗口(注意的是，高德地图只支持同时一个信息窗体的显示)</span><br><span class="line">      windows: [</span><br><span class="line">        // &#123;</span><br><span class="line">        //   id: 3,</span><br><span class="line">        //   position: e.target.getExtData().position,</span><br><span class="line">        //   content: &quot;&lt;p&gt;信息窗口&lt;/p&gt;&quot;,</span><br><span class="line">        //   offset: [3, -35],</span><br><span class="line">        //   visible: true,</span><br><span class="line">        // &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // 点标记-点击</span><br><span class="line">    markerClick(e) &#123;</span><br><span class="line">      // e.target.getExtData() 用于获取自定义属性值</span><br><span class="line">      console.log(e.target.getExtData(), &quot;---当前点标记---&quot;);</span><br><span class="line">      // 清空信息窗口</span><br><span class="line">      this.amap.clearInfoWindow();</span><br><span class="line">      this.windows.push(&#123;</span><br><span class="line">        id: 3,</span><br><span class="line">        position: e.target.getExtData().position,</span><br><span class="line">        content: &quot;&lt;p&gt;信息窗口&lt;/p&gt;&quot;,</span><br><span class="line">        offset: [3, -35],</span><br><span class="line">        visible: true,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.amap-wrapper &#123;</span><br><span class="line">  width: 100vw;</span><br><span class="line">  height: 100vh;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li><li><h5 id="折线">折线</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;amap-wrapper&quot;&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">  vid：地图容器节点的ID</span><br><span class="line">      extData：自定义属性</span><br><span class="line">      strokeColor：线条颜色</span><br><span class="line">      strokeWeight：线条宽度</span><br><span class="line">      strokeOpacity：线条透明度</span><br><span class="line">      strokeStyle：线条样式(实线:solid(默认)，虚线:dashed)</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;el-amap</span><br><span class="line">      ref=&quot;amap&quot;</span><br><span class="line">      vid=&quot;amap&quot;</span><br><span class="line">      :events=&quot;amapEvents&quot;</span><br><span class="line">      :zoom=&quot;zoom&quot;</span><br><span class="line">      :zooms=&quot;zooms&quot;</span><br><span class="line">      :center=&quot;center&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;!-- 折线 --&gt;</span><br><span class="line">      &lt;el-amap-polyline</span><br><span class="line">        vid=&quot;amap-polyline&quot;</span><br><span class="line">        v-for=&quot;polyline in polylines&quot;</span><br><span class="line">        :path=&quot;polyline.path&quot;</span><br><span class="line">        :key=&quot;polyline.id&quot;</span><br><span class="line">        strokeColor=&quot;blue&quot;</span><br><span class="line">        strokeWeight=&quot;5&quot;</span><br><span class="line">        :strokeOpacity=&quot;0.8&quot;</span><br><span class="line">        strokeStyle=&quot;solid&quot;</span><br><span class="line">      &gt;&lt;/el-amap-polyline&gt;</span><br><span class="line">    &lt;/el-amap&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 地图实例</span><br><span class="line">      amap: null,</span><br><span class="line">      // 地图实例事件</span><br><span class="line">      amapEvents: &#123;</span><br><span class="line">        // 地图图块加载完成后触发</span><br><span class="line">        complete: () =&gt; &#123;</span><br><span class="line">          _this.amap = _this.$refs.amap.$$getInstance(); // _this.$refs.amap.$$getInstance() 用于获取当前地图实例对象</span><br><span class="line">          console.log(_this.amap, &quot;---当前地图实例---&quot;);</span><br><span class="line">          _this.amap.setFitView(); // 将地图调整到合适的缩放等级和中心点</span><br><span class="line">        &#125;,</span><br><span class="line">        init(map) &#123;</span><br><span class="line">          // console.log(map,&#x27;---地图实例对象---&#x27;)</span><br><span class="line">          _this.amap = map.setMapStyle(&quot;amap://styles/macaron&quot;); // 自定义高德地图的样式</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      // 地图初始化视图的缩放级别</span><br><span class="line">      zoom: 13,</span><br><span class="line">      // 地图显示的可缩放级别范围</span><br><span class="line">      zooms: [3, 18],</span><br><span class="line">      // 地图初始化视图中心点</span><br><span class="line">      center: [116.481485, 39.990464],</span><br><span class="line">      // 折线数组</span><br><span class="line">      polylines: [</span><br><span class="line">        &#123;</span><br><span class="line">          id: 4,</span><br><span class="line">          path: [</span><br><span class="line">            [116.497485, 39.991464],</span><br><span class="line">            [116.497485, 39.992464],</span><br><span class="line">            [116.497485, 39.993464],</span><br><span class="line">            [116.497485, 39.994464],</span><br><span class="line">            [116.497485, 39.995464],</span><br><span class="line">            [116.497485, 39.996464],</span><br><span class="line">            [116.497485, 39.997464],</span><br><span class="line">            [116.497485, 39.998464],</span><br><span class="line">            [116.497485, 39.999464],</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          id: 5,</span><br><span class="line">          path: [</span><br><span class="line">            [116.457485, 39.991464],</span><br><span class="line">            [116.457485, 39.992464],</span><br><span class="line">            [116.457485, 39.993464],</span><br><span class="line">            [116.457485, 39.994464],</span><br><span class="line">            [116.457485, 39.995464],</span><br><span class="line">            [116.457485, 39.996464],</span><br><span class="line">            [116.457485, 39.997464],</span><br><span class="line">            [116.457485, 39.998464],</span><br><span class="line">            [116.457485, 39.999464],</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.amap-wrapper &#123;</span><br><span class="line">  width: 100vw;</span><br><span class="line">  height: 100vh;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li><li><h5 id="多边形">多边形</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;amap-wrapper&quot;&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">  vid：地图容器节点的ID</span><br><span class="line">      events：绑定事件</span><br><span class="line">      extData：自定义属性</span><br><span class="line">  strokeColor：线条颜色</span><br><span class="line">      strokeWeight：线条宽度</span><br><span class="line">      strokeOpacity：线条透明度</span><br><span class="line">      strokeStyle：线条样式(实线:solid(默认)，虚线:dashed)</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;el-amap</span><br><span class="line">      ref=&quot;amap&quot;</span><br><span class="line">      vid=&quot;amap&quot;</span><br><span class="line">      :events=&quot;amapEvents&quot;</span><br><span class="line">      :zoom=&quot;zoom&quot;</span><br><span class="line">      :zooms=&quot;zooms&quot;</span><br><span class="line">      :center=&quot;center&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;!-- 多边形 --&gt;</span><br><span class="line">      &lt;el-amap-polygon</span><br><span class="line">        vid=&quot;amap-polygon&quot;</span><br><span class="line">        v-for=&quot;polygon in polygons&quot;</span><br><span class="line">        :path=&quot;polygon.path&quot;</span><br><span class="line">        :key=&quot;polygon.id&quot;</span><br><span class="line">      &gt;&lt;/el-amap-polygon&gt;</span><br><span class="line">    &lt;/el-amap&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 地图实例</span><br><span class="line">      amap: null,</span><br><span class="line">      // 地图实例事件</span><br><span class="line">      amapEvents: &#123;</span><br><span class="line">        // 地图图块加载完成后触发</span><br><span class="line">        complete: () =&gt; &#123;</span><br><span class="line">          _this.amap = _this.$refs.amap.$$getInstance(); // _this.$refs.amap.$$getInstance() 用于获取当前地图实例对象</span><br><span class="line">          console.log(_this.amap, &quot;---当前地图实例---&quot;);</span><br><span class="line">          _this.amap.setFitView(); // 将地图调整到合适的缩放等级和中心点</span><br><span class="line">        &#125;,</span><br><span class="line">        init(map) &#123;</span><br><span class="line">          // console.log(map,&#x27;---地图实例对象---&#x27;)</span><br><span class="line">          _this.amap = map.setMapStyle(&quot;amap://styles/macaron&quot;); // 自定义高德地图的样式</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      // 地图初始化视图的缩放级别</span><br><span class="line">      zoom: 13,</span><br><span class="line">      // 地图显示的可缩放级别范围</span><br><span class="line">      zooms: [3, 18],</span><br><span class="line">      // 地图初始化视图中心点</span><br><span class="line">      center: [116.481485, 39.990464],</span><br><span class="line">      // 多边形</span><br><span class="line">      polygons: [</span><br><span class="line">        &#123;</span><br><span class="line">          id: 6,</span><br><span class="line">          path: [</span><br><span class="line">            [116.452385, 39.981464],</span><br><span class="line">            [116.452785, 39.982464],</span><br><span class="line">            [116.456485, 39.983464],</span><br><span class="line">            [116.458185, 39.984464],</span><br><span class="line">            [116.454685, 39.985464],</span><br><span class="line">            [116.453785, 39.986464],</span><br><span class="line">            [116.456985, 39.987464],</span><br><span class="line">            [116.451885, 39.988464],</span><br><span class="line">            [116.456885, 39.989464],</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.amap-wrapper &#123;</span><br><span class="line">  width: 100vw;</span><br><span class="line">  height: 100vh;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li><li><h5 id="圆">圆</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;amap-wrapper&quot;&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">  vid：地图容器节点的ID</span><br><span class="line">      events：绑定事件</span><br><span class="line">  extData：自定义属性</span><br><span class="line">      strokeColor：线条颜色</span><br><span class="line">      strokeWeight：线条宽度</span><br><span class="line">      strokeOpacity：线条透明度</span><br><span class="line">      strokeStyle：线条样式(实线:solid(默认)，虚线:dashed)</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;el-amap</span><br><span class="line">      ref=&quot;amap&quot;</span><br><span class="line">      vid=&quot;amap&quot;</span><br><span class="line">      :events=&quot;amapEvents&quot;</span><br><span class="line">      :zoom=&quot;zoom&quot;</span><br><span class="line">      :zooms=&quot;zooms&quot;</span><br><span class="line">      :center=&quot;center&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;!-- 圆 --&gt;</span><br><span class="line">      &lt;el-amap-circle</span><br><span class="line">        vid=&quot;amap-circle&quot;</span><br><span class="line">        v-for=&quot;circle in circles&quot;</span><br><span class="line">        :key=&quot;circle.id&quot;</span><br><span class="line">        :center=&quot;circle.center&quot;</span><br><span class="line">        :radius=&quot;circle.radius&quot;</span><br><span class="line">      &gt;&lt;/el-amap-circle&gt;</span><br><span class="line">    &lt;/el-amap&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 地图实例</span><br><span class="line">      amap: null,</span><br><span class="line">      // 地图实例事件</span><br><span class="line">      amapEvents: &#123;</span><br><span class="line">        // 地图图块加载完成后触发</span><br><span class="line">        complete: () =&gt; &#123;</span><br><span class="line">          _this.amap = _this.$refs.amap.$$getInstance(); // _this.$refs.amap.$$getInstance() 用于获取当前地图实例对象</span><br><span class="line">          console.log(_this.amap, &quot;---当前地图实例---&quot;);</span><br><span class="line">          _this.amap.setFitView(); // 将地图调整到合适的缩放等级和中心点</span><br><span class="line">        &#125;,</span><br><span class="line">        init(map) &#123;</span><br><span class="line">          // console.log(map,&#x27;---地图实例对象---&#x27;)</span><br><span class="line">          _this.amap = map.setMapStyle(&quot;amap://styles/macaron&quot;); // 自定义高德地图的样式</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      // 地图初始化视图的缩放级别</span><br><span class="line">      zoom: 13,</span><br><span class="line">      // 地图显示的可缩放级别范围</span><br><span class="line">      zooms: [3, 18],</span><br><span class="line">      // 地图初始化视图中心点</span><br><span class="line">      center: [116.481485, 39.990464],</span><br><span class="line">      // 圆</span><br><span class="line">      circles: [</span><br><span class="line">        &#123;</span><br><span class="line">          id: 7,</span><br><span class="line">          center: [116.424485, 39.973464], // 圆心位置</span><br><span class="line">          radius: 500, // 半径(米)</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.amap-wrapper &#123;</span><br><span class="line">  width: 100vw;</span><br><span class="line">  height: 100vh;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li><li><h5 id="矩形">矩形</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;amap-wrapper&quot;&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">  vid：地图容器节点的ID</span><br><span class="line">      events：绑定事件</span><br><span class="line">      extData：自定义属性</span><br><span class="line">      strokeColor：线条颜色</span><br><span class="line">      strokeWeight：线条宽度</span><br><span class="line">      strokeOpacity：线条透明度</span><br><span class="line">      strokeStyle：线条样式(实线:solid(默认)，虚线:dashed)</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;el-amap</span><br><span class="line">      ref=&quot;amap&quot;</span><br><span class="line">      vid=&quot;amap&quot;</span><br><span class="line">      :events=&quot;amapEvents&quot;</span><br><span class="line">      :zoom=&quot;zoom&quot;</span><br><span class="line">      :zooms=&quot;zooms&quot;</span><br><span class="line">      :center=&quot;center&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;!-- 矩形 --&gt;</span><br><span class="line">      &lt;el-amap-rectangle</span><br><span class="line">        vid=&quot;amap-rectangle&quot;</span><br><span class="line">        v-for=&quot;rectangle in rectangles&quot;</span><br><span class="line">        :key=&quot;rectangle.id&quot;</span><br><span class="line">        :center=&quot;rectangle.center&quot;</span><br><span class="line">        :bounds=&quot;rectangle.bounds&quot;</span><br><span class="line">      &gt;&lt;/el-amap-rectangle&gt;</span><br><span class="line">    &lt;/el-amap&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 地图实例</span><br><span class="line">      amap: null,</span><br><span class="line">      // 地图实例事件</span><br><span class="line">      amapEvents: &#123;</span><br><span class="line">        // 地图图块加载完成后触发</span><br><span class="line">        complete: () =&gt; &#123;</span><br><span class="line">          _this.amap = _this.$refs.amap.$$getInstance(); // _this.$refs.amap.$$getInstance() 用于获取当前地图实例对象</span><br><span class="line">          console.log(_this.amap, &quot;---当前地图实例---&quot;);</span><br><span class="line">          _this.amap.setFitView(); // 将地图调整到合适的缩放等级和中心点</span><br><span class="line">        &#125;,</span><br><span class="line">        init(map) &#123;</span><br><span class="line">          // console.log(map,&#x27;---地图实例对象---&#x27;)</span><br><span class="line">          _this.amap = map.setMapStyle(&quot;amap://styles/macaron&quot;); // 自定义高德地图的样式</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      // 地图初始化视图的缩放级别</span><br><span class="line">      zoom: 13,</span><br><span class="line">      // 地图显示的可缩放级别范围</span><br><span class="line">      zooms: [3, 18],</span><br><span class="line">      // 地图初始化视图中心点</span><br><span class="line">      center: [116.481485, 39.990464],</span><br><span class="line">      // 矩形</span><br><span class="line">      rectangles: [</span><br><span class="line">        &#123;</span><br><span class="line">          id: 8,</span><br><span class="line">          center: [116.514485, 39.979464], // 圆心位置</span><br><span class="line">          bounds: [</span><br><span class="line">            [116.562485, 39.911464],</span><br><span class="line">            [116.522485, 39.872464],</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.amap-wrapper &#123;</span><br><span class="line">  width: 100vw;</span><br><span class="line">  height: 100vh;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li><li><h5 id="搜索组件">搜索组件</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;amap-wrapper&quot;&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">  vid：地图容器节点的ID</span><br><span class="line">      events：绑定事件</span><br><span class="line">      --&gt;</span><br><span class="line">    &lt;el-amap</span><br><span class="line">      ref=&quot;amap&quot;</span><br><span class="line">      vid=&quot;amap&quot;</span><br><span class="line">      :events=&quot;amapEvents&quot;</span><br><span class="line">      :zoom=&quot;zoom&quot;</span><br><span class="line">      :zooms=&quot;zooms&quot;</span><br><span class="line">      :center=&quot;center&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;!-- 点标记 --&gt;</span><br><span class="line">      &lt;el-amap-marker</span><br><span class="line">        vid=&quot;amap-marker&quot;</span><br><span class="line">        v-for=&quot;marker in markers&quot;</span><br><span class="line">        :position=&quot;marker.position&quot;</span><br><span class="line">        :key=&quot;marker.id&quot;</span><br><span class="line">        :icon=&quot;marker.icon&quot;</span><br><span class="line">        :extData=&quot;marker&quot;</span><br><span class="line">        :events=&quot;marker.events&quot;</span><br><span class="line">      &gt;&lt;/el-amap-marker&gt;</span><br><span class="line">      &lt;!-- 信息窗口 --&gt;</span><br><span class="line">      &lt;el-amap-info-window</span><br><span class="line">        vid=&quot;amap-window&quot;</span><br><span class="line">        v-for=&quot;window in windows&quot;</span><br><span class="line">        :key=&quot;window.id&quot;</span><br><span class="line">        :position=&quot;window.position&quot;</span><br><span class="line">        :content=&quot;window.content&quot;</span><br><span class="line">        :offset=&quot;window.offset&quot;</span><br><span class="line">        :visible=&quot;window.visible&quot;</span><br><span class="line">        :isCustom=&quot;false&quot;</span><br><span class="line">      &gt;&lt;/el-amap-info-window&gt;</span><br><span class="line">    &lt;/el-amap&gt;</span><br><span class="line">    &lt;!-- 搜索组件 --&gt;</span><br><span class="line">    &lt;div class=&quot;search-box&quot;&gt;</span><br><span class="line">      &lt;el-amap-search-box</span><br><span class="line">        :search-option=&quot;searchOption&quot;</span><br><span class="line">        :on-search-result=&quot;onSearchResult&quot;</span><br><span class="line">      &gt;&lt;/el-amap-search-box&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 地图实例</span><br><span class="line">      amap: null,</span><br><span class="line">      // 地图实例事件</span><br><span class="line">      amapEvents: &#123;</span><br><span class="line">        // 地图图块加载完成后触发</span><br><span class="line">        complete: () =&gt; &#123;</span><br><span class="line">          _this.amap = _this.$refs.amap.$$getInstance(); // _this.$refs.amap.$$getInstance() 用于获取当前地图实例对象</span><br><span class="line">          console.log(_this.amap, &quot;---当前地图实例---&quot;);</span><br><span class="line">          _this.amap.setFitView(); // 将地图调整到合适的缩放等级和中心点</span><br><span class="line">        &#125;,</span><br><span class="line">        init(map) &#123;</span><br><span class="line">          // console.log(map,&#x27;---地图实例对象---&#x27;)</span><br><span class="line">          _this.amap = map.setMapStyle(&quot;amap://styles/macaron&quot;); // 自定义高德地图的样式</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      // 地图初始化视图的缩放级别</span><br><span class="line">      zoom: 13,</span><br><span class="line">      // 地图显示的可缩放级别范围</span><br><span class="line">      zooms: [3, 18],</span><br><span class="line">      // 地图初始化视图中心点</span><br><span class="line">      center: [116.481485, 39.990464],</span><br><span class="line">      // 点标记数组</span><br><span class="line">      markers: [</span><br><span class="line">        &#123;</span><br><span class="line">          id: 1,</span><br><span class="line">          position: [116.481485, 39.990464],</span><br><span class="line">          icon: &quot;http://218.29.14.102:18080/webenv/images/mark_b.png&quot;,</span><br><span class="line">          events: &#123;</span><br><span class="line">            click(e) &#123;</span><br><span class="line">              _this.markerClick(e);</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          id: 2,</span><br><span class="line">          position: [116.484485, 39.993464],</span><br><span class="line">          icon: &quot;http://218.29.14.102:18080/webenv/images/mark_b.png&quot;,</span><br><span class="line">          events: &#123;</span><br><span class="line">            click(e) &#123;</span><br><span class="line">              _this.markerClick(e);</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">      // 信息窗口(注意的是，高德地图只支持同时一个信息窗体的显示)</span><br><span class="line">      windows: [</span><br><span class="line">        // &#123;</span><br><span class="line">        //   id: 3,</span><br><span class="line">        //   position: e.target.getExtData().position,</span><br><span class="line">        //   content: &quot;&lt;p&gt;信息窗口&lt;/p&gt;&quot;,</span><br><span class="line">        //   offset: [3, -35],</span><br><span class="line">        //   visible: true,</span><br><span class="line">        // &#125;,</span><br><span class="line">      ],</span><br><span class="line">      // 搜索组件</span><br><span class="line">      searchOption: &#123;</span><br><span class="line">        city: &quot;全国&quot;,</span><br><span class="line">        citylimit: false,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // 点标记-点击</span><br><span class="line">    markerClick(e) &#123;</span><br><span class="line">      // e.target.getExtData() 用于获取自定义属性值</span><br><span class="line">      console.log(e.target.getExtData(), &quot;---当前点标记---&quot;);</span><br><span class="line">      // 清空信息窗口</span><br><span class="line">      this.amap.clearInfoWindow();</span><br><span class="line">      this.windows.push(&#123;</span><br><span class="line">        id: 3,</span><br><span class="line">        position: e.target.getExtData().position,</span><br><span class="line">        content: &quot;&lt;p&gt;信息窗口&lt;/p&gt;&quot;,</span><br><span class="line">        offset: [3, -35],</span><br><span class="line">        visible: true,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    // 搜索</span><br><span class="line">    onSearchResult(pois) &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      let latSum = 0;</span><br><span class="line">      let lngSum = 0;</span><br><span class="line">      if (pois.length &gt; 0) &#123;</span><br><span class="line">        pois.forEach((poi) =&gt; &#123;</span><br><span class="line">          let &#123; lng, lat &#125; = poi;</span><br><span class="line">          lngSum += lng;</span><br><span class="line">          latSum += lat;</span><br><span class="line">          this.markers.push(&#123;</span><br><span class="line">            id: this.markers.length + 1,</span><br><span class="line">            position: [poi.lng, poi.lat],</span><br><span class="line">            icon: &quot;http://218.29.14.102:18080/webenv/images/mark_b.png&quot;,</span><br><span class="line">            events: &#123;</span><br><span class="line">              click(e) &#123;</span><br><span class="line">                _this.markerClick(e);</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">        let center = &#123;</span><br><span class="line">          lng: lngSum / pois.length,</span><br><span class="line">          lat: latSum / pois.length,</span><br><span class="line">        &#125;;</span><br><span class="line">        this.center = [center.lng, center.lat];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.amap-wrapper &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  width: 100vw;</span><br><span class="line">  height: 100vh;</span><br><span class="line">&#125;</span><br><span class="line">.search-box &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: 50px;</span><br><span class="line">  right: 50px;</span><br><span class="line">  z-index: 999999999;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li><li><h5 id="插件">插件</h5><ul><li><h6 id="全局引入地图插件">全局引入地图插件</h6><p>首先需要在羡慕初始化时，通过 <code>initAMapApiLoader</code> 引入所需要的插件(<em>使用插件之前一定要初始化，否则会报错！</em>)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入方式一：一般的项目对于 vue-amap 的初始化 只需要调用 initAmapApiLoader 方法即可</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueAMap</span> <span class="keyword">from</span> <span class="string">&#x27;vue-amap&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 高德地图-设置安全密钥</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">_AMapSecurityConfig</span> = &#123;</span><br><span class="line">  <span class="attr">securityJsCode</span>: <span class="string">&quot;申请的高德地图应用的安全密钥&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueAMap</span>);</span><br><span class="line"><span class="title class_">VueAMap</span>.<span class="title function_">initAMapApiLoader</span>(&#123;</span><br><span class="line">  <span class="attr">key</span>: <span class="string">&#x27;申请的高德地图应用的key&#x27;</span>,</span><br><span class="line">  <span class="comment">// 地图插件</span></span><br><span class="line">  <span class="attr">plugin</span>: [<span class="string">&#x27;AMap.Autocomplete&#x27;</span>, <span class="string">&#x27;AMap.PlaceSearch&#x27;</span>, <span class="string">&#x27;AMap.Scale&#x27;</span>, <span class="string">&#x27;AMap.OverView&#x27;</span>, <span class="string">&#x27;AMap.ToolBar&#x27;</span>, <span class="string">&#x27;AMap.MapType&#x27;</span>,        <span class="string">&#x27;AMap.PolyEditor&#x27;</span>, <span class="string">&#x27;AMap.CircleEditor&#x27;</span>, <span class="string">&#x27;AMap.Geocoder&#x27;</span>, <span class="string">&#x27;AMap.MarkerClusterer&#x27;</span>],</span><br><span class="line">  <span class="comment">// 默认高德 sdk 版本为 1.4.4</span></span><br><span class="line">  <span class="attr">v</span>: <span class="string">&#x27;1.4.4&#x27;</span>,</span><br><span class="line">  <span class="comment">// uiVersion: &#x27;1.0.11&#x27; // 版本号(引入高德 UI 组件库)</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><h6 id="配置插件">配置插件</h6><p>全局引入插件后，需要给单个地图组件配置插件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// 例</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;el-amap vid=&quot;amapDemo&quot; :plugin=&quot;plugins&quot;&gt;&lt;/el-amap&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      plugins: [&#x27;MapType&#x27;];</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><h6 id="配置说明">配置说明</h6><p>插件名支持两种，不带<code>&quot;AMap&quot;</code>前缀，如<code>&quot;MapType&quot;</code>,带<code>&quot;AMap&quot;</code>前缀，如<code>&quot;AMap.MapType&quot;</code>。推荐前者，以下都基于前者说明。 （v0.1.2之前版本，只支持后者）</p><p>1、默认配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">   return &#123;</span><br><span class="line">      plugins: [&#x27;MapType&#x27;]</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>2、自定义配置（v0.1.2开始支持）</p><p>自定义配置对象，pName为插件名。所有属性仅支持初始化配置，不支持响应式。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">   return &#123;</span><br><span class="line">      plugins: [&#123;</span><br><span class="line">        // pName为必填字段</span><br><span class="line">        pName: &#x27;MapType&#x27;,</span><br><span class="line">        defaultType: 1</span><br><span class="line">      &#125;]</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><h6 id="类型插件">类型插件</h6><p>地图类型切换插件，用来切换固定的几个常用图层</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;amap-wrapper&quot;&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">    vid：地图容器节点的ID</span><br><span class="line">      events：绑定事件</span><br><span class="line">      plugin：插件</span><br><span class="line">      --&gt;</span><br><span class="line">    &lt;el-amap</span><br><span class="line">      ref=&quot;amap&quot;</span><br><span class="line">      vid=&quot;amap&quot;</span><br><span class="line">      :events=&quot;amapEvents&quot;</span><br><span class="line">      :zoom=&quot;zoom&quot;</span><br><span class="line">      :zooms=&quot;zooms&quot;</span><br><span class="line">      :center=&quot;center&quot;</span><br><span class="line">      :plugin=&quot;plugins&quot;</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;/el-amap&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 地图实例</span><br><span class="line">      amap: null,</span><br><span class="line">      // 地图实例事件</span><br><span class="line">      amapEvents: &#123;</span><br><span class="line">        // 地图图块加载完成后触发</span><br><span class="line">        complete: () =&gt; &#123;</span><br><span class="line">          _this.amap = _this.$refs.amap.$$getInstance(); // _this.$refs.amap.$$getInstance() 用于获取当前地图实例对象</span><br><span class="line">          console.log(_this.amap, &quot;---当前地图实例---&quot;);</span><br><span class="line">          _this.amap.setFitView(); // 将地图调整到合适的缩放等级和中心点</span><br><span class="line">        &#125;,</span><br><span class="line">        init(map) &#123;</span><br><span class="line">          // console.log(map,&#x27;---地图实例对象---&#x27;)</span><br><span class="line">          _this.amap = map.setMapStyle(&quot;amap://styles/macaron&quot;); // 自定义高德地图的样式</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      // 地图初始化视图的缩放级别</span><br><span class="line">      zoom: 13,</span><br><span class="line">      // 地图显示的可缩放级别范围</span><br><span class="line">      zooms: [3, 18],</span><br><span class="line">      // 地图初始化视图中心点</span><br><span class="line">      center: [116.481485, 39.990464],</span><br><span class="line">      // 插件</span><br><span class="line">      plugins: [</span><br><span class="line">        &#123;</span><br><span class="line">          pName: &quot;MapType&quot;,</span><br><span class="line">          defaultType: 0, // 初始化默认图层类型(默认值：0),取值为0：默认底图  取值为1：卫星图</span><br><span class="line">          events: &#123;</span><br><span class="line">            init(instance) &#123;</span><br><span class="line">              console.log(instance);</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.amap-wrapper &#123;</span><br><span class="line">  width: 100vw;</span><br><span class="line">  height: 100vh;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li><li><h6 id="鹰眼插件">鹰眼插件</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;amap-wrapper&quot;&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">    vid：地图容器节点的ID</span><br><span class="line">      events：绑定事件</span><br><span class="line">      plugin：插件</span><br><span class="line">      --&gt;</span><br><span class="line">    &lt;el-amap</span><br><span class="line">      ref=&quot;amap&quot;</span><br><span class="line">      vid=&quot;amap&quot;</span><br><span class="line">      :events=&quot;amapEvents&quot;</span><br><span class="line">      :zoom=&quot;zoom&quot;</span><br><span class="line">      :zooms=&quot;zooms&quot;</span><br><span class="line">      :center=&quot;center&quot;</span><br><span class="line">      :plugin=&quot;plugins&quot;</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;/el-amap&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 地图实例</span><br><span class="line">      amap: null,</span><br><span class="line">      // 地图实例事件</span><br><span class="line">      amapEvents: &#123;</span><br><span class="line">        // 地图图块加载完成后触发</span><br><span class="line">        complete: () =&gt; &#123;</span><br><span class="line">          _this.amap = _this.$refs.amap.$$getInstance(); // _this.$refs.amap.$$getInstance() 用于获取当前地图实例对象</span><br><span class="line">          console.log(_this.amap, &quot;---当前地图实例---&quot;);</span><br><span class="line">          _this.amap.setFitView(); // 将地图调整到合适的缩放等级和中心点</span><br><span class="line">        &#125;,</span><br><span class="line">        init(map) &#123;</span><br><span class="line">          // console.log(map,&#x27;---地图实例对象---&#x27;)</span><br><span class="line">          _this.amap = map.setMapStyle(&quot;amap://styles/macaron&quot;); // 自定义高德地图的样式</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      // 地图初始化视图的缩放级别</span><br><span class="line">      zoom: 13,</span><br><span class="line">      // 地图显示的可缩放级别范围</span><br><span class="line">      zooms: [3, 18],</span><br><span class="line">      // 地图初始化视图中心点</span><br><span class="line">      center: [116.481485, 39.990464],</span><br><span class="line">      // 插件</span><br><span class="line">      plugins: [</span><br><span class="line">        &#123;</span><br><span class="line">          pName: &quot;OverView&quot;,</span><br><span class="line">          isOpen: true, // 是否展开鹰眼 (默认为false)</span><br><span class="line">          visible: true, // 是否显示鹰眼 (默认为true)</span><br><span class="line">          events: &#123;</span><br><span class="line">            init(instance) &#123;</span><br><span class="line">              console.log(instance);</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.amap-wrapper &#123;</span><br><span class="line">  width: 100vw;</span><br><span class="line">  height: 100vh;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li><li><h6 id="比例尺插件">比例尺插件</h6><p>比例尺插件。位于地图右下角，用户可控制其显示与隐藏</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;amap-wrapper&quot;&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">    vid：地图容器节点的ID</span><br><span class="line">      events：绑定事件</span><br><span class="line">      plugin：插件</span><br><span class="line">      --&gt;</span><br><span class="line">    &lt;el-amap</span><br><span class="line">      ref=&quot;amap&quot;</span><br><span class="line">      vid=&quot;amap&quot;</span><br><span class="line">      :events=&quot;amapEvents&quot;</span><br><span class="line">      :zoom=&quot;zoom&quot;</span><br><span class="line">      :zooms=&quot;zooms&quot;</span><br><span class="line">      :center=&quot;center&quot;</span><br><span class="line">      :plugin=&quot;plugins&quot;</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;/el-amap&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 地图实例</span><br><span class="line">      amap: null,</span><br><span class="line">      // 地图实例事件</span><br><span class="line">      amapEvents: &#123;</span><br><span class="line">        // 地图图块加载完成后触发</span><br><span class="line">        complete: () =&gt; &#123;</span><br><span class="line">          _this.amap = _this.$refs.amap.$$getInstance(); // _this.$refs.amap.$$getInstance() 用于获取当前地图实例对象</span><br><span class="line">          console.log(_this.amap, &quot;---当前地图实例---&quot;);</span><br><span class="line">          _this.amap.setFitView(); // 将地图调整到合适的缩放等级和中心点</span><br><span class="line">        &#125;,</span><br><span class="line">        init(map) &#123;</span><br><span class="line">          // console.log(map,&#x27;---地图实例对象---&#x27;)</span><br><span class="line">          _this.amap = map.setMapStyle(&quot;amap://styles/macaron&quot;); // 自定义高德地图的样式</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      // 地图初始化视图的缩放级别</span><br><span class="line">      zoom: 13,</span><br><span class="line">      // 地图显示的可缩放级别范围</span><br><span class="line">      zooms: [3, 18],</span><br><span class="line">      // 地图初始化视图中心点</span><br><span class="line">      center: [116.481485, 39.990464],</span><br><span class="line">      // 插件</span><br><span class="line">      plugins: [</span><br><span class="line">        &#123;</span><br><span class="line">          pName: &quot;Scale&quot;,</span><br><span class="line">          events: &#123;</span><br><span class="line">            init(instance) &#123;</span><br><span class="line">              console.log(instance);</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.amap-wrapper &#123;</span><br><span class="line">  width: 100vw;</span><br><span class="line">  height: 100vh;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li><li><h6 id="工具条插件">工具条插件</h6><p>地图工具条插件，可以用来控制地图的缩放和平移</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;amap-wrapper&quot;&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">    vid：地图容器节点的ID</span><br><span class="line">      events：绑定事件</span><br><span class="line">      plugin：插件</span><br><span class="line">      --&gt;</span><br><span class="line">    &lt;el-amap</span><br><span class="line">      ref=&quot;amap&quot;</span><br><span class="line">      vid=&quot;amap&quot;</span><br><span class="line">      :events=&quot;amapEvents&quot;</span><br><span class="line">      :zoom=&quot;zoom&quot;</span><br><span class="line">      :zooms=&quot;zooms&quot;</span><br><span class="line">      :center=&quot;center&quot;</span><br><span class="line">      :plugin=&quot;plugins&quot;</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;/el-amap&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 地图实例</span><br><span class="line">      amap: null,</span><br><span class="line">      // 地图实例事件</span><br><span class="line">      amapEvents: &#123;</span><br><span class="line">        // 地图图块加载完成后触发</span><br><span class="line">        complete: () =&gt; &#123;</span><br><span class="line">          _this.amap = _this.$refs.amap.$$getInstance(); // _this.$refs.amap.$$getInstance() 用于获取当前地图实例对象</span><br><span class="line">          console.log(_this.amap, &quot;---当前地图实例---&quot;);</span><br><span class="line">          _this.amap.setFitView(); // 将地图调整到合适的缩放等级和中心点</span><br><span class="line">        &#125;,</span><br><span class="line">        init(map) &#123;</span><br><span class="line">          // console.log(map,&#x27;---地图实例对象---&#x27;)</span><br><span class="line">          _this.amap = map.setMapStyle(&quot;amap://styles/macaron&quot;); // 自定义高德地图的样式</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      // 地图初始化视图的缩放级别</span><br><span class="line">      zoom: 13,</span><br><span class="line">      // 地图显示的可缩放级别范围</span><br><span class="line">      zooms: [3, 18],</span><br><span class="line">      // 地图初始化视图中心点</span><br><span class="line">      center: [116.481485, 39.990464],</span><br><span class="line">      // 插件</span><br><span class="line">      plugins: [</span><br><span class="line">        &#123;</span><br><span class="line">          pName: &quot;ToolBar&quot;,</span><br><span class="line">          position:&#x27;LT&#x27;, // 控件停靠位置 LT:左上角; RT:右上角; LB:左下角; RB:右下角; 默认位置：LT</span><br><span class="line">          ruler:true, // 标尺键盘是否可见，默认为true</span><br><span class="line">          noIpLocate:false, // 定位失败后，是否开启IP定位，默认为false</span><br><span class="line">          locate:false, // 是否开启定位按钮，默认为false</span><br><span class="line">          liteStyle:false, // 是否使用精简模式，默认为false</span><br><span class="line">          direction:true, // 方向键盘是否可见，默认为true</span><br><span class="line">          autoPosition:false, // 是否自动定位，即地图初始化加载完成后，是否自动定位的用户所在地，仅在支持HTML5的浏览器中有效，默认为false</span><br><span class="line">          useNative:false, // 是否使用高德定位sdk用来辅助优化定位效果，默认：false.</span><br><span class="line">          events: &#123;</span><br><span class="line">            init(instance) &#123;</span><br><span class="line">              console.log(instance);</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.amap-wrapper &#123;</span><br><span class="line">  width: 100vw;</span><br><span class="line">  height: 100vh;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li><li><h6 id="定位插件">定位插件</h6><p>Geolocation定位服务插件。融合了浏览器定位、高精度IP定位、安卓定位 sdk 辅助定位等多种手段，提供了获取当前准确位置、获取当前城市信息、持续定位(浏览器定位)等功能。用户可以通过两种当时获得定位的成败和结果，一种是在 getCurrentPosition 的时候传入回调函数来处理定位结果，一种是通过事件监听来取得定位结果。Geolocation 定位常见问题说明 注：默认情况下，PC端优先使用精确IP定位，解决多数浏览器无法完成定位的现状，IP定位失败后使用浏览器定位；手机端优先使用浏览器定位，失败后使用IP定位；对于安卓WebView页面的开发者，可以结合定位 sdk 进行辅助定位，详细说明见 useNative 参数。IP定位的精度值为 null。</p><p>注意：由于 Chrome 、IOS10 等已不再支持非安全域的浏览器定位请求，为保证定位成功率和精度，请尽快升级您的站点到 HTTPS 。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;amap-wrapper&quot;&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">    vid：地图容器节点的ID</span><br><span class="line">      events：绑定事件</span><br><span class="line">      plugin：插件</span><br><span class="line">      --&gt;</span><br><span class="line">    &lt;el-amap</span><br><span class="line">      ref=&quot;amap&quot;</span><br><span class="line">      vid=&quot;amap&quot;</span><br><span class="line">      :events=&quot;amapEvents&quot;</span><br><span class="line">      :zoom=&quot;zoom&quot;</span><br><span class="line">      :zooms=&quot;zooms&quot;</span><br><span class="line">      :center=&quot;center&quot;</span><br><span class="line">      :plugin=&quot;plugins&quot;</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;/el-amap&gt;</span><br><span class="line">    &lt;!-- 定位点 --&gt;</span><br><span class="line">    &lt;div class=&quot;position&quot;&gt;</span><br><span class="line">      &lt;span v-if=&quot;loaded&quot;&gt; 经度：&#123;&#123; lng &#125;&#125;，纬度：&#123;&#123; lat &#125;&#125; &lt;/span&gt;</span><br><span class="line">      &lt;span v-else&gt;正在定位&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 地图实例</span><br><span class="line">      amap: null,</span><br><span class="line">      // 地图实例事件</span><br><span class="line">      amapEvents: &#123;</span><br><span class="line">        // 地图图块加载完成后触发</span><br><span class="line">        complete: () =&gt; &#123;</span><br><span class="line">          _this.amap = _this.$refs.amap.$$getInstance(); // _this.$refs.amap.$$getInstance() 用于获取当前地图实例对象</span><br><span class="line">          console.log(_this.amap, &quot;---当前地图实例---&quot;);</span><br><span class="line">          _this.amap.setFitView(); // 将地图调整到合适的缩放等级和中心点</span><br><span class="line">        &#125;,</span><br><span class="line">        init(map) &#123;</span><br><span class="line">          // console.log(map,&#x27;---地图实例对象---&#x27;)</span><br><span class="line">          _this.amap = map.setMapStyle(&quot;amap://styles/macaron&quot;); // 自定义高德地图的样式</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      // 地图初始化视图的缩放级别</span><br><span class="line">      zoom: 13,</span><br><span class="line">      // 地图显示的可缩放级别范围</span><br><span class="line">      zooms: [3, 18],</span><br><span class="line">      // 地图初始化视图中心点</span><br><span class="line">      center: [116.481485, 39.990464],</span><br><span class="line">      // 插件</span><br><span class="line">      lng: 0,</span><br><span class="line">      lat: 0,</span><br><span class="line">      loaded: false,</span><br><span class="line">      plugins: [</span><br><span class="line">        &#123;</span><br><span class="line">          pName: &quot;Geolocation&quot;,</span><br><span class="line">          events: &#123;</span><br><span class="line">            init(o) &#123;</span><br><span class="line">              // o 是高德地图定位插件实例</span><br><span class="line">              o.getCurrentPosition((status, result) =&gt; &#123;</span><br><span class="line">                console.log(result, &quot;-----定位插件----&quot;);</span><br><span class="line">                if (result &amp;&amp; result.position) &#123;</span><br><span class="line">                  _this.lng = result.position.lng;</span><br><span class="line">                  _this.lat = result.position.lat;</span><br><span class="line">                  _this.center = [_this.lng, _this.lat];</span><br><span class="line">                  _this.loaded = true;</span><br><span class="line">                  _this.$nextTick();</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.amap-wrapper &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  width: 100vw;</span><br><span class="line">  height: 100vh;</span><br><span class="line">&#125;</span><br><span class="line">.position &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: 40px;</span><br><span class="line">  left: 80px;</span><br><span class="line">  z-index: 999999999;</span><br><span class="line">  border: 1px solid #cccccc;</span><br><span class="line">  background-color: #ffffff;</span><br><span class="line">  padding: 10px 20px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li></ul></li><li><h5 id="综合使用">综合使用</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;amap-wrapper&quot;&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">    vid：地图容器节点的ID</span><br><span class="line">      events：绑定事件</span><br><span class="line">      extData：自定义属性</span><br><span class="line">      icon：点标记中显示的图标(可以是本地图标)</span><br><span class="line">      isCustom：是否自定义信息窗口</span><br><span class="line">      strokeColor：线条颜色</span><br><span class="line">      strokeWeight：线条宽度</span><br><span class="line">      strokeOpacity：线条透明度</span><br><span class="line">      strokeStyle：线条样式(实线:solid(默认)，虚线:dashed)</span><br><span class="line">      --&gt;</span><br><span class="line">    &lt;el-amap</span><br><span class="line">      ref=&quot;amap&quot;</span><br><span class="line">      vid=&quot;amap&quot;</span><br><span class="line">      :events=&quot;amapEvents&quot;</span><br><span class="line">      :zoom=&quot;zoom&quot;</span><br><span class="line">      :zooms=&quot;zooms&quot;</span><br><span class="line">      :center=&quot;center&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;!-- 点标记 --&gt;</span><br><span class="line">      &lt;el-amap-marker</span><br><span class="line">        vid=&quot;amap-marker&quot;</span><br><span class="line">        v-for=&quot;marker in markers&quot;</span><br><span class="line">        :position=&quot;marker.position&quot;</span><br><span class="line">        :key=&quot;marker.id&quot;</span><br><span class="line">        :icon=&quot;marker.icon&quot;</span><br><span class="line">        :extData=&quot;marker&quot;</span><br><span class="line">        :events=&quot;marker.events&quot;</span><br><span class="line">      &gt;&lt;/el-amap-marker&gt;</span><br><span class="line">      &lt;!-- 信息窗口 --&gt;</span><br><span class="line">      &lt;el-amap-info-window</span><br><span class="line">        vid=&quot;amap-window&quot;</span><br><span class="line">        v-for=&quot;window in windows&quot;</span><br><span class="line">        :key=&quot;window.id&quot;</span><br><span class="line">        :position=&quot;window.position&quot;</span><br><span class="line">        :content=&quot;window.content&quot;</span><br><span class="line">        :offset=&quot;window.offset&quot;</span><br><span class="line">        :visible=&quot;window.visible&quot;</span><br><span class="line">        :isCustom=&quot;false&quot;</span><br><span class="line">      &gt;&lt;/el-amap-info-window&gt;</span><br><span class="line">      &lt;!-- 折线 --&gt;</span><br><span class="line">      &lt;el-amap-polyline</span><br><span class="line">        vid=&quot;amap-polyline&quot;</span><br><span class="line">        v-for=&quot;polyline in polylines&quot;</span><br><span class="line">        :path=&quot;polyline.path&quot;</span><br><span class="line">        :key=&quot;polyline.id&quot;</span><br><span class="line">        strokeColor=&quot;blue&quot;</span><br><span class="line">        strokeWeight=&quot;5&quot;</span><br><span class="line">        :strokeOpacity=&quot;0.8&quot;</span><br><span class="line">        strokeStyle=&quot;solid&quot;</span><br><span class="line">      &gt;&lt;/el-amap-polyline&gt;</span><br><span class="line">      &lt;!-- 多边形 --&gt;</span><br><span class="line">      &lt;el-amap-polygon</span><br><span class="line">        vid=&quot;amap-polygon&quot;</span><br><span class="line">        v-for=&quot;polygon in polygons&quot;</span><br><span class="line">        :path=&quot;polygon.path&quot;</span><br><span class="line">        :key=&quot;polygon.id&quot;</span><br><span class="line">      &gt;&lt;/el-amap-polygon&gt;</span><br><span class="line">      &lt;!-- 圆 --&gt;</span><br><span class="line">      &lt;el-amap-circle</span><br><span class="line">        vid=&quot;amap-circle&quot;</span><br><span class="line">        v-for=&quot;circle in circles&quot;</span><br><span class="line">        :key=&quot;circle.id&quot;</span><br><span class="line">        :center=&quot;circle.center&quot;</span><br><span class="line">        :radius=&quot;circle.radius&quot;</span><br><span class="line">      &gt;&lt;/el-amap-circle&gt;</span><br><span class="line">      &lt;!-- 矩形 --&gt;</span><br><span class="line">      &lt;el-amap-rectangle</span><br><span class="line">        vid=&quot;amap-rectangle&quot;</span><br><span class="line">        v-for=&quot;rectangle in rectangles&quot;</span><br><span class="line">        :key=&quot;rectangle.id&quot;</span><br><span class="line">        :center=&quot;rectangle.center&quot;</span><br><span class="line">        :bounds=&quot;rectangle.bounds&quot;</span><br><span class="line">      &gt;&lt;/el-amap-rectangle&gt;</span><br><span class="line">    &lt;/el-amap&gt;</span><br><span class="line">    &lt;!-- 搜索组件 --&gt;</span><br><span class="line">    &lt;div class=&quot;search-box&quot;&gt;</span><br><span class="line">      &lt;el-amap-search-box</span><br><span class="line">        :search-option=&quot;searchOption&quot;</span><br><span class="line">        :on-search-result=&quot;onSearchResult&quot;</span><br><span class="line">      &gt;&lt;/el-amap-search-box&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    let _this = this;</span><br><span class="line">    return &#123;</span><br><span class="line">      // 地图实例</span><br><span class="line">      amap: null,</span><br><span class="line">      // 地图实例事件</span><br><span class="line">      amapEvents: &#123;</span><br><span class="line">        // 地图图块加载完成后触发</span><br><span class="line">        complete: () =&gt; &#123;</span><br><span class="line">          _this.amap = _this.$refs.amap.$$getInstance(); // _this.$refs.amap.$$getInstance() 用于获取当前地图实例对象</span><br><span class="line">          console.log(_this.amap, &quot;---当前地图实例---&quot;);</span><br><span class="line">          _this.amap.setFitView(); // 将地图调整到合适的缩放等级和中心点</span><br><span class="line">        &#125;,</span><br><span class="line">        init(map) &#123;</span><br><span class="line">          // console.log(map,&#x27;---地图实例对象---&#x27;)</span><br><span class="line">          _this.amap = map.setMapStyle(&quot;amap://styles/macaron&quot;); // 自定义高德地图的样式</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      // 地图初始化视图的缩放级别</span><br><span class="line">      zoom: 13,</span><br><span class="line">      // 地图显示的可缩放级别范围</span><br><span class="line">      zooms: [3, 18],</span><br><span class="line">      // 地图初始化视图中心点</span><br><span class="line">      center: [116.481485, 39.990464],</span><br><span class="line">      // 点标记数组</span><br><span class="line">      markers: [</span><br><span class="line">        &#123;</span><br><span class="line">          id: 1,</span><br><span class="line">          position: [116.481485, 39.990464],</span><br><span class="line">          icon: &quot;http://218.29.14.102:18080/webenv/images/mark_b.png&quot;,</span><br><span class="line">          events: &#123;</span><br><span class="line">            click(e) &#123;</span><br><span class="line">              _this.markerClick(e);</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          id: 2,</span><br><span class="line">          position: [116.484485, 39.993464],</span><br><span class="line">          icon: &quot;http://218.29.14.102:18080/webenv/images/mark_b.png&quot;,</span><br><span class="line">          events: &#123;</span><br><span class="line">            click(e) &#123;</span><br><span class="line">              _this.markerClick(e);</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">      // 信息窗口(注意的是，高德地图只支持同时一个信息窗体的显示)</span><br><span class="line">      windows: [</span><br><span class="line">        // &#123;</span><br><span class="line">        //   id: 3,</span><br><span class="line">        //   position: e.target.getExtData().position,</span><br><span class="line">        //   content: &quot;&lt;p&gt;信息窗口&lt;/p&gt;&quot;,</span><br><span class="line">        //   offset: [3, -35],</span><br><span class="line">        // &#125;,</span><br><span class="line">      ],</span><br><span class="line">      // 折线数组</span><br><span class="line">      polylines: [</span><br><span class="line">        &#123;</span><br><span class="line">          id: 4,</span><br><span class="line">          path: [</span><br><span class="line">            [116.497485, 39.991464],</span><br><span class="line">            [116.497485, 39.992464],</span><br><span class="line">            [116.497485, 39.993464],</span><br><span class="line">            [116.497485, 39.994464],</span><br><span class="line">            [116.497485, 39.995464],</span><br><span class="line">            [116.497485, 39.996464],</span><br><span class="line">            [116.497485, 39.997464],</span><br><span class="line">            [116.497485, 39.998464],</span><br><span class="line">            [116.497485, 39.999464],</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          id: 5,</span><br><span class="line">          path: [</span><br><span class="line">            [116.457485, 39.991464],</span><br><span class="line">            [116.457485, 39.992464],</span><br><span class="line">            [116.457485, 39.993464],</span><br><span class="line">            [116.457485, 39.994464],</span><br><span class="line">            [116.457485, 39.995464],</span><br><span class="line">            [116.457485, 39.996464],</span><br><span class="line">            [116.457485, 39.997464],</span><br><span class="line">            [116.457485, 39.998464],</span><br><span class="line">            [116.457485, 39.999464],</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">      // 多边形</span><br><span class="line">      polygons: [</span><br><span class="line">        &#123;</span><br><span class="line">          id: 6,</span><br><span class="line">          path: [</span><br><span class="line">            [116.452385, 39.981464],</span><br><span class="line">            [116.452785, 39.982464],</span><br><span class="line">            [116.456485, 39.983464],</span><br><span class="line">            [116.458185, 39.984464],</span><br><span class="line">            [116.454685, 39.985464],</span><br><span class="line">            [116.453785, 39.986464],</span><br><span class="line">            [116.456985, 39.987464],</span><br><span class="line">            [116.451885, 39.988464],</span><br><span class="line">            [116.456885, 39.989464],</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">      // 圆</span><br><span class="line">      circles: [</span><br><span class="line">        &#123;</span><br><span class="line">          id: 7,</span><br><span class="line">          center: [116.424485, 39.973464], // 圆心位置</span><br><span class="line">          radius: 500, // 半径(米)</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">      // 矩形</span><br><span class="line">      rectangles: [</span><br><span class="line">        &#123;</span><br><span class="line">          id: 8,</span><br><span class="line">          center: [116.514485, 39.979464], // 圆心位置</span><br><span class="line">          bounds: [</span><br><span class="line">            [116.562485, 39.911464],</span><br><span class="line">            [116.522485, 39.872464],</span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">      // 搜索组件</span><br><span class="line">      searchOption: &#123;</span><br><span class="line">        city: &quot;全国&quot;,</span><br><span class="line">        citylimit: false,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // 点标记-点击</span><br><span class="line">    markerClick(e) &#123;</span><br><span class="line">      // e.target.getExtData() 用于获取自定义属性值</span><br><span class="line">      console.log(e.target.getExtData(), &quot;---当前点标记---&quot;);</span><br><span class="line">      // 清空信息窗口</span><br><span class="line">      this.amap.clearInfoWindow();</span><br><span class="line">      // 添加信息窗口</span><br><span class="line">      this.windows.push(&#123;</span><br><span class="line">        id: 3,</span><br><span class="line">        position: e.target.getExtData().position,</span><br><span class="line">        content: &#x27;&lt;div style=&quot;padding: 20px;&quot;&gt;我是信息窗口&lt;div&gt;&#x27;,</span><br><span class="line">        offset: [3, -35],</span><br><span class="line">        visible: true,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    // 搜索</span><br><span class="line">    onSearchResult(pois) &#123;</span><br><span class="line">      let _this = this;</span><br><span class="line">      let latSum = 0;</span><br><span class="line">      let lngSum = 0;</span><br><span class="line">      if (pois.length &gt; 0) &#123;</span><br><span class="line">        pois.forEach((poi) =&gt; &#123;</span><br><span class="line">          let &#123; lng, lat &#125; = poi;</span><br><span class="line">          lngSum += lng;</span><br><span class="line">          latSum += lat;</span><br><span class="line">          this.markers.push(&#123;</span><br><span class="line">            id: this.markers.length + 1,</span><br><span class="line">            position: [poi.lng, poi.lat],</span><br><span class="line">            icon: &quot;http://218.29.14.102:18080/webenv/images/mark_b.png&quot;,</span><br><span class="line">            events: &#123;</span><br><span class="line">              click(e) &#123;</span><br><span class="line">                _this.markerClick(e);</span><br><span class="line">              &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">        let center = &#123;</span><br><span class="line">          lng: lngSum / pois.length,</span><br><span class="line">          lat: latSum / pois.length,</span><br><span class="line">        &#125;;</span><br><span class="line">        this.center = [center.lng, center.lat];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.amap-wrapper &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  width: 100vw;</span><br><span class="line">  height: 100vh;</span><br><span class="line">&#125;</span><br><span class="line">.search-box &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: 50px;</span><br><span class="line">  right: 50px;</span><br><span class="line">  z-index: 999999999;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="👉jsapi">👉JSAPI</h3><h4 id="关于jsapi">关于JSAPI</h4><ul><li></li></ul>]]></content>
      
      
      <categories>
          
          <category> Vue2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【TypeScript】学习笔记（二）TypeSript的安装</title>
      <link href="/2022/12/11/%E3%80%90TypeScript%E3%80%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89TypeSript%E7%9A%84%E9%85%8D%E7%BD%AE/"/>
      <url>/2022/12/11/%E3%80%90TypeScript%E3%80%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89TypeSript%E7%9A%84%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h3 id="👉安装">👉安装</h3><h4 id="1-执行安装命令"><strong>1、执行安装命令</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g typescript</span><br></pre></td></tr></table></figure><h4 id="2-检测安装是否成功"><strong>2、检测安装是否成功</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc -v</span><br></pre></td></tr></table></figure><p><img src="https://ocean-resources.oss-cn-shenzhen.aliyuncs.com/blog/TypeScript/1.png" alt=""></p><h3 id="👉项目中使用">👉项目中使用</h3><h4 id="1-创建-tsconfig-json-配置文件"><strong>1、创建 <code>tsconfig.json</code> 配置文件</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc --init</span><br></pre></td></tr></table></figure><p><img src="https://ocean-resources.oss-cn-shenzhen.aliyuncs.com/blog/TypeScript/2.png" alt=""></p><h4 id="2-tsconfig-json"><strong>2、</strong><code>tsconfig.json</code></h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**************基础配置**************/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 开启增量编译：TS 编译器在第一次编译的时候，会生成一个存储编译信息的文件，下一次编译的时候，会根据这个文件进行增量的编译，以此提高TS的编译速度 */</span></span><br><span class="line">        <span class="comment">// &quot;incremental&quot;: true,</span></span><br><span class="line">        <span class="comment">/* 指定存储增量编译信息的文件位置 */</span></span><br><span class="line">        <span class="comment">// &quot;tsBuildInfoFile&quot;: &quot;./&quot;,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 打印诊断信息 */</span></span><br><span class="line">        <span class="comment">// &quot;diagnostics&quot;: true,</span></span><br><span class="line">        <span class="comment">/* 打印输出的文件 */</span></span><br><span class="line">        <span class="comment">// &quot;listEmittedFiles&quot;: true,</span></span><br><span class="line">        <span class="comment">/* 打印编译的文件（包括引用的声明文件）*/</span></span><br><span class="line">        <span class="comment">// &quot;listFiles&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 指定 ECMAScript 的目标版本: &#x27;ES3&#x27; (default), &#x27;ES5&#x27;, &#x27;ES2015&#x27;, &#x27;ES2016&#x27;, &#x27;ES2017&#x27;, &#x27;ES2018&#x27;, &#x27;ES2019&#x27; or &#x27;ESNEXT&#x27;. */</span></span><br><span class="line">        <span class="comment">// &quot;target&quot;: &quot;es5&quot;,</span></span><br><span class="line">        <span class="comment">/* 指定模块代码的生成方式: &#x27;none&#x27;, &#x27;commonjs&#x27;, &#x27;amd&#x27;, &#x27;system&#x27;, &#x27;umd&#x27;, &#x27;es2015&#x27;, or &#x27;ESNext&#x27;. */</span></span><br><span class="line">        <span class="comment">// &quot;module&quot;: &quot;commonjs&quot;,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 指定要包含在编译中的库文件——引用类库——即申明文件，如果输出的模块方式是 es5，就会默认引入 &quot;dom&quot;,&quot;es5&quot;,&quot;scripthost&quot;  */</span></span><br><span class="line">        <span class="comment">/* 如果在 TS 中想要使用一些 ES6 以上版本的语法，就需要引入相关的类库 */</span></span><br><span class="line">        <span class="comment">// &quot;lib&quot;: [],</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 允许编译 JS 文件 */</span></span><br><span class="line">        <span class="comment">// &quot;allowJs&quot;: true,</span></span><br><span class="line">        <span class="comment">/* 检查 JS 文件*/</span></span><br><span class="line">        <span class="comment">// &quot;checkJs&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 指定 JSX 代码生成的模式: &#x27;preserve&#x27;, &#x27;react-native&#x27;, or &#x27;react&#x27;. */</span></span><br><span class="line">        <span class="comment">/* &#x27;react&#x27; 模式下：TS 会直接把 jsx 编译成 js */</span></span><br><span class="line">        <span class="comment">/* &#x27;preserve&#x27; 模式下：TS 不会把 jsx 编译成 js，会保留 jsx */</span></span><br><span class="line">        <span class="comment">// &quot;jsx&quot;: &quot;preserve&quot;,</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**************声明文件相关配置**************/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 生成相应的类型声明文件 —— &#x27;.d.ts&#x27; */</span></span><br><span class="line">        <span class="comment">// &quot;declaration&quot;: true,</span></span><br><span class="line">        <span class="comment">/* 声明文件的输出路径 */</span></span><br><span class="line">        <span class="comment">// &quot;declarationDir&quot;: &quot;./d&quot;,</span></span><br><span class="line">        <span class="comment">/* 只生成声明文件，不生成 JS */</span></span><br><span class="line">        <span class="comment">// &quot;emitDeclarationOnly&quot;: true,</span></span><br><span class="line">        <span class="comment">/* 声明文件目录，默认 node_modules/@types */</span></span><br><span class="line">        <span class="comment">// &quot;typeRoots&quot;: [],</span></span><br><span class="line">        <span class="comment">/* 要导入的声明文件包，默认导入上面声明文件目录下的所有声明文件 */</span></span><br><span class="line">        <span class="comment">// &quot;types&quot;: [],</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 将多个相互依赖的文件合并并且把编译后的内容输出到一个文件里</span></span><br><span class="line"><span class="comment">         * 可以用在产出 AMD 模块的场景中</span></span><br><span class="line"><span class="comment">         * &quot;module&quot;:&quot;amd&quot; 时，当一个模块引入了另外一个模块，编译的时候会把这两个模块的编译结果合并到一个文件中</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">// &quot;outFile&quot;: &quot;./&quot;,</span></span><br><span class="line">        <span class="comment">/* 指定编译文件的输出目录 */</span></span><br><span class="line">        <span class="comment">// &quot;outDir&quot;: &quot;./out&quot;,</span></span><br><span class="line">        <span class="comment">/* 指定输入文件的根目录，用于控制输出目录的结构 */</span></span><br><span class="line">        <span class="comment">// &quot;rootDir&quot;: &quot;./&quot;,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 启用项目编译 */</span></span><br><span class="line">        <span class="comment">// &quot;composite&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*  输出的时候移除注释 */</span></span><br><span class="line">        <span class="comment">// &quot;removeComments&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 不输出文件 */</span></span><br><span class="line">        <span class="comment">// &quot;noEmit&quot;: true,</span></span><br><span class="line">        <span class="comment">/* 发生错误时不输出文件 */</span></span><br><span class="line">        <span class="comment">// &quot;noEmitOnError&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 不生成 helper 函数，以前的话设置为 true 后，需要额外安装 ts-helpers */</span></span><br><span class="line">        <span class="comment">/* 类似于 babel ，会给每个文件都生成 helper 函数，会使得最终编译后的包的体积变大 */</span></span><br><span class="line">        <span class="comment">// &quot;noEmitHelpers&quot;: true,</span></span><br><span class="line">        <span class="comment">/* 现在可以通过 tslib（TS 内置的库）引入 helper 函数，！！！文件必须是模块 ！！！ */</span></span><br><span class="line">        <span class="comment">/* 编译后自动引入 var tslib_1 = require(&quot;tslib&quot;) */</span></span><br><span class="line">        <span class="comment">// &quot;importHelpers&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 当目标是 ES5 或 ES3 的时候提供对 for-of、扩展运算符和解构赋值中对于迭代器的完整支持 */</span></span><br><span class="line">        <span class="comment">// &quot;downlevelIteration&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 把每一个文件转译成一个单独的模块 */</span></span><br><span class="line">        <span class="comment">// &quot;isolatedModules&quot;: true,</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**************严格检查配置**************/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 开启所有的严格检查配置 */</span></span><br><span class="line">        <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="comment">/* 不允许使用隐式的 any 类型 */</span></span><br><span class="line">        <span class="comment">// &quot;noImplicitAny&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 不允许把 null、undefined 赋值给其他类型变量 */</span></span><br><span class="line">        <span class="comment">// &quot;strictNullChecks&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 不允许函数参数双向协变 */</span></span><br><span class="line">        <span class="comment">// &quot;strictFunctionTypes&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 使用 bind/call/apply 时，严格检查函数参数类型 */</span></span><br><span class="line">        <span class="comment">// &quot;strictBindCallApply&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 类的实例属性必须初始化 */</span></span><br><span class="line">        <span class="comment">// &quot;strictPropertyInitialization&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 不允许 this 有隐式的 any 类型，即 this 必须有明确的指向*/</span></span><br><span class="line">        <span class="comment">// &quot;noImplicitThis&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 在严格模式下解析并且向每个源文件中注入 &quot;use strict&quot; */</span></span><br><span class="line">        <span class="comment">// &quot;alwaysStrict&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**************额外的语法检查配置，这种检查交给 eslint 就行，没必要配置**************/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 有未使用到的本地变量时报错 */</span></span><br><span class="line">        <span class="comment">// &quot;noUnusedLocals&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 有未使用到的函数参数时报错 */</span></span><br><span class="line">        <span class="comment">// &quot;noUnusedParameters&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 每个分支都要有返回值 */</span></span><br><span class="line">        <span class="comment">// &quot;noImplicitReturns&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 严格校验 switch-case 语法 */</span></span><br><span class="line">        <span class="comment">// &quot;noFallthroughCasesInSwitch&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**************模块解析配置**************/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 指定模块的解析策略: &#x27;node&#x27; (Node.js) or &#x27;classic&#x27; (TypeScript pre-1.6)*/</span></span><br><span class="line">        <span class="comment">/* 若未指定，那么在使用了 --module AMD | System | ES2015 时的默认值为 Classic，其它情况时则为 Node */</span></span><br><span class="line">        <span class="comment">// &quot;moduleResolution&quot;: &quot;node&quot;,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 在解析非绝对路径模块名的时候的基准路径 */</span></span><br><span class="line">        <span class="comment">// &quot;baseUrl&quot;: &quot;./&quot;,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 基于 &#x27;baseUrl&#x27; 的路径映射集合 */</span></span><br><span class="line">        <span class="comment">// &quot;paths&quot;: &#123;&#125;,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 将多个目录放在一个虚拟目录下，用于运行时 */</span></span><br><span class="line">        <span class="comment">/* 当自己编写的库和开发的代码都输出到一个目录下时，开发代码和库的位置不一样，开发代码引入库的路径就会不对 */</span></span><br><span class="line">        <span class="comment">// &quot;rootDirs&quot;: [],</span></span><br><span class="line">        <span class="comment">// &quot;rootDirs&quot;: [&quot;src&quot;,&quot;out&quot;],</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 允许 export = xxx 导出 ，并使用 import xxx form &quot;module-name&quot; 导入*/</span></span><br><span class="line">        <span class="comment">// &quot;esModuleInterop&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 当模块没有默认导出的时候，允许被别的模块默认导入，这个在代码执行的时候没有作用，只是在类型检查的时候生效 */</span></span><br><span class="line">        <span class="comment">// &quot;allowSyntheticDefaultImports&quot;: true,</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 不要 symlinks 解析的真正路径 */</span></span><br><span class="line">        <span class="comment">// &quot;preserveSymlinks&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 允许在模块中以全局变量的方式访问 UMD 模块内容 */</span></span><br><span class="line">        <span class="comment">// &quot;allowUmdGlobalAccess&quot;: true,</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/************** Source Map 配置**************/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 指定 ts 文件位置 */</span></span><br><span class="line">        <span class="comment">// &quot;sourceRoot&quot;: &quot;&quot;,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 指定 map 文件存放的位置 */</span></span><br><span class="line">        <span class="comment">// &quot;mapRoot&quot;: &quot;&quot;,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 生成目标文件的 sourceMap */</span></span><br><span class="line">        <span class="comment">// &quot;sourceMap&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 将代码与sourcemaps生成到一个文件中，要求同时设置了--inlineSourceMap 或--sourceMap 属性*/</span></span><br><span class="line">        <span class="comment">// &quot;inlineSources&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 生成目标文件的 inline sourceMap —— 源文件和 sourcemap 文件在同一文件中，而不是把 map 文件放在一个单独的文件里*/</span></span><br><span class="line">        <span class="comment">// &quot;inlineSourceMap&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 生成声明文件的 sourceMap */</span></span><br><span class="line">        <span class="comment">// &quot;declarationMap&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/************** 实验性的配置**************/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 启用装饰器 */</span></span><br><span class="line">        <span class="comment">// &quot;experimentalDecorators&quot;: true,</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// &quot;emitDecoratorMetadata&quot;: true,    </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**************高级配置**************/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 强制区分大小写 */</span></span><br><span class="line">        <span class="comment">// &quot;forceConsistentCasingInFileNames&quot;: true</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 指定需要编译的单个文件列表 */</span></span><br><span class="line">    <span class="comment">// &quot;files&quot;: [],</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 指定需要编译的文件/目录 */</span></span><br><span class="line">    <span class="comment">// &quot;include&quot;: [</span></span><br><span class="line">    <span class="comment">//    // 只写一个目录名等价于 &quot;./src/**/*&quot;</span></span><br><span class="line">    <span class="comment">//    &quot;src&quot;</span></span><br><span class="line">    <span class="comment">//  ]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 需要排除的文件或目录 */</span></span><br><span class="line">    <span class="comment">// &quot;exclude&quot;: []</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 配置文件继承 */</span></span><br><span class="line">    <span class="comment">// &quot;extends&quot;: &quot;./tsconfig.base.json&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="3-监视-tsconfig-json"><strong>3、监视 <code>tsconfig.json</code></strong></h4><ul><li><p>vscode -&gt; 终端 -&gt; 运行任务 -&gt; typescript -&gt; tsc: 构建 tsconfig.json</p><p><img src="https://ocean-resources.oss-cn-shenzhen.aliyuncs.com/blog/TypeScript/3.png" alt=""></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> TypeScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【TypeScript】学习笔记（一）TypeSript VS JavaScript</title>
      <link href="/2022/11/30/%E3%80%90TypeScript%E3%80%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89TypeSript%20VS%20JavaScript/"/>
      <url>/2022/11/30/%E3%80%90TypeScript%E3%80%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89TypeSript%20VS%20JavaScript/</url>
      
        <content type="html"><![CDATA[<h3 id="👉关于它们">👉关于它们</h3><p><strong>JavaSript</strong></p><ul><li>JavaScript 是具有函数优先的、轻量级的、解释型（即时编译型）的一种编程语言</li><li>JavaScript 基于原型编程，是多范式的动态脚本语言，支持面向对象、命令式和声明式（如函数编程）风格。并且它遵循ECMAScript标准<ul><li>ECMAScript：描述了JavaScript语言的语法和基本对象</li><li>文档对象模型（DOM）：描述处理网页内容的方法和接口</li><li>浏览器对象模型（BOM）：描述与浏览器进行交互的方法和接口</li></ul></li><li>javaScript 特点<ul><li>JavaScript 是一种脚本编写语言，无需编译，只要嵌入 HTML 代码中，就能由浏览器逐行加载解释执行</li><li>JavaScript 是一种基于对象的语言，可以创建对象同时使用现有对象。但是 Javascript 并不支持其它面向对象语言所具有的继承和重载功能</li><li>JavaScript 的语法简单，使用的变量为弱类型</li><li>JavaScript 语言较为安全，仅在浏览器端执行，不会访问本地硬盘数据</li><li>JavaScript 语言具有动态性。JavaScript 是事件驱动的，只根据用户的操作做出相应的反应处理</li><li>JavaScript 只依赖于浏览器，与操作系统的因素无关。因此 JavaScript 是一种跨平台的语言</li><li>JavaScript 兼容性较好，能够与其他技术（如 XML，REST API 等）一起使用</li></ul></li></ul><p><strong>TypeScript</strong></p><ul><li>TypeScript 是 Microsoft 开发和维护的一种开源的面向对象的编程语言，通过在JavaScript的基础上添加静态类型定义构建而成。它是 JavaScript 的超集，可以被编译成 Javascript；它包含了 JavaScript 的所有元素，并扩展了 JavaScript 的语法；它还可以载入 JavaScript 代码运行（用 Javascript 编写的合法代码，在Typescript 中依然有效）。</li><li>语法上，TypeScript 很类似于 JScript .NET，另外一个添加了对静态类型，经典的面向对象语言特性如类，继承，接口、枚举、泛型和命名空间等的支持的 Microsoft 对 ECMAScript 语言标准的实现</li></ul><h3 id="👉两者区别">👉两者区别</h3><p><strong>JavaScript</strong></p><ul><li>动态类型，运行时明确变量的类型，变量的类型由变量的值决定，并跟随值的改变而改变</li><li>直接运行在浏览器和node.js环境中</li><li>弱类型，数据类型可以被忽略的语言。一个变量可以赋不同数据类型的值</li></ul><p><strong>TypeScript</strong></p><ul><li>静态类型，声明时确定类型，之后不允许修改</li><li>编译运行，始终先编译成JavaScript再运行</li><li>强类型，一旦一个变量被指定了某个数据类型，如果不经过强制转换，那么它就永远是这个数据类型了</li></ul><h3 id="👉typescript的优点">👉<strong>TypeScript的优点</strong></h3><ul><li>开源，跨平台。它本身不需要考虑运行环境的问题，所有支持JavaScript的地方都可以使用typescript</li><li>引入静态类型声明，减少不必要的类型判断和文档注释</li><li>及早发现错误，静态类型检查或编译时发现问题，不用等到运行</li><li>类、接口的使用更易于构建和维护组件</li><li>编辑器内智能提示，对于一些用ts开发或者有types.d.ts类型包的第三方库有良好代码提示</li><li>重构更方便可靠, 强大的接口类型可以充当使用文档</li></ul>]]></content>
      
      
      <categories>
          
          <category> TypeScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TypeScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【随笔】写在11月的尾巴</title>
      <link href="/2022/11/27/%E5%86%99%E5%9C%A811%E6%9C%88%E7%9A%84%E5%B0%BE%E5%B7%B4/"/>
      <url>/2022/11/27/%E5%86%99%E5%9C%A811%E6%9C%88%E7%9A%84%E5%B0%BE%E5%B7%B4/</url>
      
        <content type="html"><![CDATA[<p>11月，北方的天气似乎已是风雪飘飘，穿着大棉袄的景象。而在深圳这个南方城市中，大家却依旧在抵御炎热的气候，短袖出行，同是一个秋，差距却是挺大的。这个月，对于自己而言，时间过的似乎很快，但是经历的事情却是感觉有不少。</p><h3 id="👉工作上">👉工作上</h3><p>自从搬到了离公司近的租房之后，上班通勤时间缩短到了20分钟以内，早上起床倒是没有了以往的匆忙，但是还是经常踩点迟到，噗，得好好反思一下哈哈哈。</p><p>工作上还算顺利，遇到的难题也有，主要是没接触过(大部分只能怪自己太懒了，没有去广泛学习嘿嘿)，遇到不会的小难题，那就想办法去解决它，然后在这个过程中成长积累经验。</p><p>工作量呢也和以往差不多，偶尔加加班，赶一赶，倒还是可以按时完成项目，属实算是有惊无险，但是还是可以明显感觉到自己在一些知识点方面的不足和缺陷。</p><p>当然，我们不可能一下子就变得优秀，不可能一下子就减掉肥肉，也不可能一下子就培养一个好习惯，任何事情都会有一个过程，这个过程也是你成长的一部分，希望以后可以加油加油，做的更好，💪fighting！！！</p><h3 id="👉生活上">👉生活上</h3><p>仔细想想，最近都没怎么自己做过几顿饭，可惜了我姐给我买的新锅哈哈哈，偶尔自己做做饭也是挺舒坦的，但是会做的菜也没几道，看来下次回家得好好看看爸妈怎么做饭，偷学点厨艺👨‍🍳嘿嘿。</p><p>最近也是和以往一样，日常失眠，失眠似乎已经成了自己生活中的一部分，怎么甩都甩不掉，试过吃药，试过自我催眠，试过做多点事情让自己更累，但是依然是很难入睡，也是没辙了，那就顺其自然吧😑</p><p>感受上呢，烦心事也有，但是自己还能消化，相信好运会有的，面包也会有的，要微笑面对每一天，做人最要紧的就是开心啦！！！😄</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
